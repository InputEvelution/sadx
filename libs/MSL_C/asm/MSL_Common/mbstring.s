.include "macros.s"

.section .text, "ax"  # 0x800058A0 - 0x800764A0 ; 0x00070C00


.global wcstombs
wcstombs:
/* 8000B5F8 00008418  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 8000B5FC 0000841C  7C 08 02 A6 */	mflr r0
/* 8000B600 00008420  90 01 00 34 */	stw r0, 0x34(r1)
/* 8000B604 00008424  BF 61 00 1C */	stmw r27, 0x1c(r1)
/* 8000B608 00008428  7C 7B 1B 79 */	mr. r27, r3
/* 8000B60C 0000842C  7C BC 2B 78 */	mr r28, r5
/* 8000B610 00008430  3B C0 00 00 */	li r30, 0x0
/* 8000B614 00008434  41 82 00 0C */	beq lbl_8000B620
/* 8000B618 00008438  28 04 00 00 */	cmplwi r4, 0x0
/* 8000B61C 0000843C  40 82 00 0C */	bne lbl_8000B628
lbl_8000B620:
/* 8000B620 00008440  38 60 00 00 */	li r3, 0x0
/* 8000B624 00008444  48 00 00 60 */	b lbl_8000B684
lbl_8000B628:
/* 8000B628 00008448  7C 9D 23 78 */	mr r29, r4
/* 8000B62C 0000844C  48 00 00 4C */	b lbl_8000B678
lbl_8000B630:
/* 8000B630 00008450  A0 9D 00 00 */	lhz r4, 0x0(r29)
/* 8000B634 00008454  28 04 00 00 */	cmplwi r4, 0x0
/* 8000B638 00008458  40 82 00 10 */	bne lbl_8000B648
/* 8000B63C 0000845C  38 00 00 00 */	li r0, 0x0
/* 8000B640 00008460  7C 1B F1 AE */	stbx r0, r27, r30
/* 8000B644 00008464  48 00 00 3C */	b lbl_8000B680
lbl_8000B648:
/* 8000B648 00008468  38 61 00 08 */	addi r3, r1, 0x8
/* 8000B64C 0000846C  3B BD 00 02 */	addi r29, r29, 0x2
/* 8000B650 00008470  48 00 00 49 */	bl unicode_to_UTF8
/* 8000B654 00008474  7C 7F 1B 78 */	mr r31, r3
/* 8000B658 00008478  7C 1E FA 14 */	add r0, r30, r31
/* 8000B65C 0000847C  7C 00 E0 40 */	cmplw r0, r28
/* 8000B660 00008480  41 81 00 20 */	bgt lbl_8000B680
/* 8000B664 00008484  7F E5 FB 78 */	mr r5, r31
/* 8000B668 00008488  7C 7B F2 14 */	add r3, r27, r30
/* 8000B66C 0000848C  38 81 00 08 */	addi r4, r1, 0x8
/* 8000B670 00008490  48 00 3A 4D */	bl strncpy
/* 8000B674 00008494  7F DE FA 14 */	add r30, r30, r31
lbl_8000B678:
/* 8000B678 00008498  7C 1E E0 40 */	cmplw r30, r28
/* 8000B67C 0000849C  40 81 FF B4 */	ble lbl_8000B630
lbl_8000B680:
/* 8000B680 000084A0  7F C3 F3 78 */	mr r3, r30
lbl_8000B684:
/* 8000B684 000084A4  BB 61 00 1C */	lmw r27, 0x1c(r1)
/* 8000B688 000084A8  80 01 00 34 */	lwz r0, 0x34(r1)
/* 8000B68C 000084AC  7C 08 03 A6 */	mtlr r0
/* 8000B690 000084B0  38 21 00 30 */	addi r1, r1, 0x30
/* 8000B694 000084B4  4E 80 00 20 */	blr

.global unicode_to_UTF8
unicode_to_UTF8:
/* 8000B698 000084B8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8000B69C 000084BC  28 03 00 00 */	cmplwi r3, 0x0
/* 8000B6A0 000084C0  80 02 80 50 */	lwz r0, lbl_800C46D0@sda21(r2)
/* 8000B6A4 000084C4  90 01 00 08 */	stw r0, 0x8(r1)
/* 8000B6A8 000084C8  40 82 00 0C */	bne lbl_8000B6B4
/* 8000B6AC 000084CC  38 60 00 00 */	li r3, 0x0
/* 8000B6B0 000084D0  48 00 00 84 */	b lbl_8000B734
lbl_8000B6B4:
/* 8000B6B4 000084D4  54 80 04 3E */	clrlwi r0, r4, 16
/* 8000B6B8 000084D8  28 00 00 80 */	cmplwi r0, 0x80
/* 8000B6BC 000084DC  40 80 00 0C */	bge lbl_8000B6C8
/* 8000B6C0 000084E0  38 A0 00 01 */	li r5, 0x1
/* 8000B6C4 000084E4  48 00 00 18 */	b lbl_8000B6DC
lbl_8000B6C8:
/* 8000B6C8 000084E8  28 00 08 00 */	cmplwi r0, 0x800
/* 8000B6CC 000084EC  40 80 00 0C */	bge lbl_8000B6D8
/* 8000B6D0 000084F0  38 A0 00 02 */	li r5, 0x2
/* 8000B6D4 000084F4  48 00 00 08 */	b lbl_8000B6DC
lbl_8000B6D8:
/* 8000B6D8 000084F8  38 A0 00 03 */	li r5, 0x3
lbl_8000B6DC:
/* 8000B6DC 000084FC  2C 05 00 02 */	cmpwi r5, 0x2
/* 8000B6E0 00008500  7C C3 2A 14 */	add r6, r3, r5
/* 8000B6E4 00008504  41 82 00 2C */	beq lbl_8000B710
/* 8000B6E8 00008508  40 80 00 10 */	bge lbl_8000B6F8
/* 8000B6EC 0000850C  2C 05 00 01 */	cmpwi r5, 0x1
/* 8000B6F0 00008510  40 80 00 30 */	bge lbl_8000B720
/* 8000B6F4 00008514  48 00 00 3C */	b lbl_8000B730
lbl_8000B6F8:
/* 8000B6F8 00008518  2C 05 00 04 */	cmpwi r5, 0x4
/* 8000B6FC 0000851C  40 80 00 34 */	bge lbl_8000B730
/* 8000B700 00008520  54 80 06 BE */	clrlwi r0, r4, 26
/* 8000B704 00008524  54 84 D5 BE */	rlwinm r4, r4, 26, 22, 31
/* 8000B708 00008528  60 00 00 80 */	ori r0, r0, 0x80
/* 8000B70C 0000852C  9C 06 FF FF */	stbu r0, -0x1(r6)
lbl_8000B710:
/* 8000B710 00008530  54 80 06 BE */	clrlwi r0, r4, 26
/* 8000B714 00008534  54 84 D5 BE */	rlwinm r4, r4, 26, 22, 31
/* 8000B718 00008538  60 00 00 80 */	ori r0, r0, 0x80
/* 8000B71C 0000853C  9C 06 FF FF */	stbu r0, -0x1(r6)
lbl_8000B720:
/* 8000B720 00008540  38 61 00 08 */	addi r3, r1, 0x8
/* 8000B724 00008544  7C 03 28 AE */	lbzx r0, r3, r5
/* 8000B728 00008548  7C 80 03 78 */	or r0, r4, r0
/* 8000B72C 0000854C  98 06 FF FF */	stb r0, -0x1(r6)
lbl_8000B730:
/* 8000B730 00008550  7C A3 2B 78 */	mr r3, r5
lbl_8000B734:
/* 8000B734 00008554  38 21 00 10 */	addi r1, r1, 0x10
/* 8000B738 00008558  4E 80 00 20 */	blr

.global mbtowc
mbtowc:
/* 8000B73C 0000855C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8000B740 00008560  7C 08 02 A6 */	mflr r0
/* 8000B744 00008564  90 01 00 14 */	stw r0, 0x14(r1)
/* 8000B748 00008568  48 00 00 15 */	bl utf8_to_unicode
/* 8000B74C 0000856C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8000B750 00008570  7C 08 03 A6 */	mtlr r0
/* 8000B754 00008574  38 21 00 10 */	addi r1, r1, 0x10
/* 8000B758 00008578  4E 80 00 20 */	blr

.global utf8_to_unicode
utf8_to_unicode:
/* 8000B75C 0000857C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8000B760 00008580  7C 08 02 A6 */	mflr r0
/* 8000B764 00008584  90 01 00 24 */	stw r0, 0x24(r1)
/* 8000B768 00008588  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8000B76C 0000858C  7C 7F 1B 78 */	mr r31, r3
/* 8000B770 00008590  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8000B774 00008594  3B C0 00 00 */	li r30, 0x0
/* 8000B778 00008598  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8000B77C 0000859C  7C 9D 23 79 */	mr. r29, r4
/* 8000B780 000085A0  40 82 00 0C */	bne lbl_8000B78C
/* 8000B784 000085A4  38 60 00 00 */	li r3, 0x0
/* 8000B788 000085A8  48 00 00 D8 */	b lbl_8000B860
lbl_8000B78C:
/* 8000B78C 000085AC  28 05 00 00 */	cmplwi r5, 0x0
/* 8000B790 000085B0  40 82 00 0C */	bne lbl_8000B79C
/* 8000B794 000085B4  38 60 FF FF */	li r3, -0x1
/* 8000B798 000085B8  48 00 00 C8 */	b lbl_8000B860
lbl_8000B79C:
/* 8000B79C 000085BC  7F A3 EB 78 */	mr r3, r29
/* 8000B7A0 000085C0  7C A4 2B 78 */	mr r4, r5
/* 8000B7A4 000085C4  48 00 00 D9 */	bl is_utf8_complete
/* 8000B7A8 000085C8  2C 03 00 00 */	cmpwi r3, 0x0
/* 8000B7AC 000085CC  40 80 00 0C */	bge lbl_8000B7B8
/* 8000B7B0 000085D0  38 60 FF FF */	li r3, -0x1
/* 8000B7B4 000085D4  48 00 00 AC */	b lbl_8000B860
lbl_8000B7B8:
/* 8000B7B8 000085D8  2C 03 00 02 */	cmpwi r3, 0x2
/* 8000B7BC 000085DC  7F A4 EB 78 */	mr r4, r29
/* 8000B7C0 000085E0  41 82 00 2C */	beq lbl_8000B7EC
/* 8000B7C4 000085E4  40 80 00 10 */	bge lbl_8000B7D4
/* 8000B7C8 000085E8  2C 03 00 01 */	cmpwi r3, 0x1
/* 8000B7CC 000085EC  40 80 00 34 */	bge lbl_8000B800
/* 8000B7D0 000085F0  48 00 00 40 */	b lbl_8000B810
lbl_8000B7D4:
/* 8000B7D4 000085F4  2C 03 00 04 */	cmpwi r3, 0x4
/* 8000B7D8 000085F8  40 80 00 38 */	bge lbl_8000B810
/* 8000B7DC 000085FC  88 1D 00 00 */	lbz r0, 0x0(r29)
/* 8000B7E0 00008600  38 9D 00 01 */	addi r4, r29, 0x1
/* 8000B7E4 00008604  54 00 35 B2 */	rlwinm r0, r0, 6, 22, 25
/* 8000B7E8 00008608  7C 1E 03 78 */	mr r30, r0
lbl_8000B7EC:
/* 8000B7EC 0000860C  88 04 00 00 */	lbz r0, 0x0(r4)
/* 8000B7F0 00008610  38 84 00 01 */	addi r4, r4, 0x1
/* 8000B7F4 00008614  54 00 06 BE */	clrlwi r0, r0, 26
/* 8000B7F8 00008618  7F C0 03 78 */	or r0, r30, r0
/* 8000B7FC 0000861C  54 1E 34 32 */	rlwinm r30, r0, 6, 16, 25
lbl_8000B800:
/* 8000B800 00008620  88 04 00 00 */	lbz r0, 0x0(r4)
/* 8000B804 00008624  54 00 06 7E */	clrlwi r0, r0, 25
/* 8000B808 00008628  7F C0 03 78 */	or r0, r30, r0
/* 8000B80C 0000862C  54 1E 04 3E */	clrlwi r30, r0, 16
lbl_8000B810:
/* 8000B810 00008630  57 C0 04 3F */	clrlwi. r0, r30, 16
/* 8000B814 00008634  40 82 00 0C */	bne lbl_8000B820
/* 8000B818 00008638  38 00 00 00 */	li r0, 0x0
/* 8000B81C 0000863C  48 00 00 28 */	b lbl_8000B844
lbl_8000B820:
/* 8000B820 00008640  28 00 00 80 */	cmplwi r0, 0x80
/* 8000B824 00008644  40 80 00 0C */	bge lbl_8000B830
/* 8000B828 00008648  38 00 00 01 */	li r0, 0x1
/* 8000B82C 0000864C  48 00 00 18 */	b lbl_8000B844
lbl_8000B830:
/* 8000B830 00008650  28 00 08 00 */	cmplwi r0, 0x800
/* 8000B834 00008654  40 80 00 0C */	bge lbl_8000B840
/* 8000B838 00008658  38 00 00 02 */	li r0, 0x2
/* 8000B83C 0000865C  48 00 00 08 */	b lbl_8000B844
lbl_8000B840:
/* 8000B840 00008660  38 00 00 03 */	li r0, 0x3
lbl_8000B844:
/* 8000B844 00008664  7C 00 18 00 */	cmpw r0, r3
/* 8000B848 00008668  41 82 00 0C */	beq lbl_8000B854
/* 8000B84C 0000866C  38 60 FF FF */	li r3, -0x1
/* 8000B850 00008670  48 00 00 10 */	b lbl_8000B860
lbl_8000B854:
/* 8000B854 00008674  28 1F 00 00 */	cmplwi r31, 0x0
/* 8000B858 00008678  41 82 00 08 */	beq lbl_8000B860
/* 8000B85C 0000867C  B3 DF 00 00 */	sth r30, 0x0(r31)
lbl_8000B860:
/* 8000B860 00008680  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8000B864 00008684  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8000B868 00008688  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8000B86C 0000868C  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8000B870 00008690  7C 08 03 A6 */	mtlr r0
/* 8000B874 00008694  38 21 00 20 */	addi r1, r1, 0x20
/* 8000B878 00008698  4E 80 00 20 */	blr

.global is_utf8_complete
is_utf8_complete:
/* 8000B87C 0000869C  28 04 00 00 */	cmplwi r4, 0x0
/* 8000B880 000086A0  40 82 00 0C */	bne lbl_8000B88C
/* 8000B884 000086A4  38 60 FF FF */	li r3, -0x1
/* 8000B888 000086A8  4E 80 00 20 */	blr
lbl_8000B88C:
/* 8000B88C 000086AC  88 A3 00 00 */	lbz r5, 0x0(r3)
/* 8000B890 000086B0  7C A0 07 75 */	extsb. r0, r5
/* 8000B894 000086B4  40 82 00 0C */	bne lbl_8000B8A0
/* 8000B898 000086B8  38 60 00 00 */	li r3, 0x0
/* 8000B89C 000086BC  4E 80 00 20 */	blr
lbl_8000B8A0:
/* 8000B8A0 000086C0  7C A5 07 74 */	extsb r5, r5
/* 8000B8A4 000086C4  54 A0 06 31 */	rlwinm. r0, r5, 0, 24, 24
/* 8000B8A8 000086C8  40 82 00 0C */	bne lbl_8000B8B4
/* 8000B8AC 000086CC  38 60 00 01 */	li r3, 0x1
/* 8000B8B0 000086D0  4E 80 00 20 */	blr
lbl_8000B8B4:
/* 8000B8B4 000086D4  54 A0 06 34 */	rlwinm r0, r5, 0, 24, 26
/* 8000B8B8 000086D8  2C 00 00 C0 */	cmpwi r0, 0xc0
/* 8000B8BC 000086DC  40 82 00 30 */	bne lbl_8000B8EC
/* 8000B8C0 000086E0  28 04 00 02 */	cmplwi r4, 0x2
/* 8000B8C4 000086E4  41 80 00 20 */	blt lbl_8000B8E4
/* 8000B8C8 000086E8  88 03 00 01 */	lbz r0, 0x1(r3)
/* 8000B8CC 000086EC  38 60 FF FF */	li r3, -0x1
/* 8000B8D0 000086F0  54 00 06 30 */	rlwinm r0, r0, 0, 24, 24
/* 8000B8D4 000086F4  2C 00 00 80 */	cmpwi r0, 0x80
/* 8000B8D8 000086F8  4C 82 00 20 */	bnelr
/* 8000B8DC 000086FC  38 60 00 02 */	li r3, 0x2
/* 8000B8E0 00008700  4E 80 00 20 */	blr
lbl_8000B8E4:
/* 8000B8E4 00008704  38 60 FF FE */	li r3, -0x2
/* 8000B8E8 00008708  4E 80 00 20 */	blr
lbl_8000B8EC:
/* 8000B8EC 0000870C  54 A0 06 36 */	rlwinm r0, r5, 0, 24, 27
/* 8000B8F0 00008710  2C 00 00 E0 */	cmpwi r0, 0xe0
/* 8000B8F4 00008714  40 82 00 6C */	bne lbl_8000B960
/* 8000B8F8 00008718  28 04 00 03 */	cmplwi r4, 0x3
/* 8000B8FC 0000871C  41 80 00 34 */	blt lbl_8000B930
/* 8000B900 00008720  88 03 00 01 */	lbz r0, 0x1(r3)
/* 8000B904 00008724  54 00 06 30 */	rlwinm r0, r0, 0, 24, 24
/* 8000B908 00008728  2C 00 00 80 */	cmpwi r0, 0x80
/* 8000B90C 0000872C  40 82 00 1C */	bne lbl_8000B928
/* 8000B910 00008730  88 03 00 02 */	lbz r0, 0x2(r3)
/* 8000B914 00008734  54 00 06 30 */	rlwinm r0, r0, 0, 24, 24
/* 8000B918 00008738  2C 00 00 80 */	cmpwi r0, 0x80
/* 8000B91C 0000873C  40 82 00 0C */	bne lbl_8000B928
/* 8000B920 00008740  38 60 00 03 */	li r3, 0x3
/* 8000B924 00008744  4E 80 00 20 */	blr
lbl_8000B928:
/* 8000B928 00008748  38 60 FF FF */	li r3, -0x1
/* 8000B92C 0000874C  4E 80 00 20 */	blr
lbl_8000B930:
/* 8000B930 00008750  28 04 00 02 */	cmplwi r4, 0x2
/* 8000B934 00008754  40 82 00 14 */	bne lbl_8000B948
/* 8000B938 00008758  88 03 00 01 */	lbz r0, 0x1(r3)
/* 8000B93C 0000875C  54 00 06 30 */	rlwinm r0, r0, 0, 24, 24
/* 8000B940 00008760  2C 00 00 80 */	cmpwi r0, 0x80
/* 8000B944 00008764  41 82 00 0C */	beq lbl_8000B950
lbl_8000B948:
/* 8000B948 00008768  28 04 00 01 */	cmplwi r4, 0x1
/* 8000B94C 0000876C  40 82 00 0C */	bne lbl_8000B958
lbl_8000B950:
/* 8000B950 00008770  38 60 FF FE */	li r3, -0x2
/* 8000B954 00008774  4E 80 00 20 */	blr
lbl_8000B958:
/* 8000B958 00008778  38 60 FF FF */	li r3, -0x1
/* 8000B95C 0000877C  4E 80 00 20 */	blr
lbl_8000B960:
/* 8000B960 00008780  38 60 FF FF */	li r3, -0x1
/* 8000B964 00008784  4E 80 00 20 */	blr

.section .sdata2, "wa"  # 0x800C4680 - 0x800C5140 ; 0x00000AC0

.balign 8

.global lbl_800C46D0
lbl_800C46D0:

	# ROM: 0x82D90
	.4byte 0x0000C0E0
