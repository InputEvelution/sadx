.include "macros.s"

.section .text, "ax"  # 0x800058A0 - 0x800764A0 ; 0x00070C00


.global TRKDestructEvent
TRKDestructEvent:
/* 800145D8 000113F8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 800145DC 000113FC  7C 08 02 A6 */	mflr r0
/* 800145E0 00011400  90 01 00 14 */	stw r0, 0x14(r1)
/* 800145E4 00011404  80 63 00 08 */	lwz r3, 0x8(r3)
/* 800145E8 00011408  48 00 0D D5 */	bl TRKReleaseBuffer
/* 800145EC 0001140C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 800145F0 00011410  7C 08 03 A6 */	mtlr r0
/* 800145F4 00011414  38 21 00 10 */	addi r1, r1, 0x10
/* 800145F8 00011418  4E 80 00 20 */	blr

.global TRKConstructEvent
TRKConstructEvent:
/* 800145FC 0001141C  98 83 00 00 */	stb r4, 0x0(r3)
/* 80014600 00011420  38 80 00 00 */	li r4, 0x0
/* 80014604 00011424  38 00 FF FF */	li r0, -0x1
/* 80014608 00011428  90 83 00 04 */	stw r4, 0x4(r3)
/* 8001460C 0001142C  90 03 00 08 */	stw r0, 0x8(r3)
/* 80014610 00011430  4E 80 00 20 */	blr

.global TRKPostEvent
TRKPostEvent:
/* 80014614 00011434  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80014618 00011438  7C 08 02 A6 */	mflr r0
/* 8001461C 0001143C  3C 80 80 08 */	lis r4, gTRKEventQueue@ha
/* 80014620 00011440  90 01 00 24 */	stw r0, 0x24(r1)
/* 80014624 00011444  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80014628 00011448  3B E0 00 00 */	li r31, 0x0
/* 8001462C 0001144C  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80014630 00011450  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80014634 00011454  7C 7D 1B 78 */	mr r29, r3
/* 80014638 00011458  38 64 6B 10 */	addi r3, r4, gTRKEventQueue@l
/* 8001463C 0001145C  48 00 45 69 */	bl TRKAcquireMutex
/* 80014640 00011460  3C 60 80 08 */	lis r3, gTRKEventQueue@ha
/* 80014644 00011464  3B C3 6B 10 */	addi r30, r3, gTRKEventQueue@l
/* 80014648 00011468  80 7E 00 04 */	lwz r3, 0x4(r30)
/* 8001464C 0001146C  2C 03 00 02 */	cmpwi r3, 0x2
/* 80014650 00011470  40 82 00 0C */	bne lbl_8001465C
/* 80014654 00011474  3B E0 01 00 */	li r31, 0x100
/* 80014658 00011478  48 00 00 70 */	b lbl_800146C8
lbl_8001465C:
/* 8001465C 0001147C  80 1E 00 08 */	lwz r0, 0x8(r30)
/* 80014660 00011480  7F A4 EB 78 */	mr r4, r29
/* 80014664 00011484  38 A0 00 0C */	li r5, 0xc
/* 80014668 00011488  7C 00 1A 14 */	add r0, r0, r3
/* 8001466C 0001148C  54 03 0F FE */	srwi r3, r0, 31
/* 80014670 00011490  54 00 07 FE */	clrlwi r0, r0, 31
/* 80014674 00011494  7C 00 1A 78 */	xor r0, r0, r3
/* 80014678 00011498  7C 03 00 50 */	subf r0, r3, r0
/* 8001467C 0001149C  1F A0 00 0C */	mulli r29, r0, 0xc
/* 80014680 000114A0  7C 7E EA 14 */	add r3, r30, r29
/* 80014684 000114A4  38 63 00 0C */	addi r3, r3, 0xc
/* 80014688 000114A8  4B FE EB E1 */	bl TRK_memcpy
/* 8001468C 000114AC  3C 60 80 08 */	lis r3, gTRKEventQueue@ha
/* 80014690 000114B0  38 83 6B 10 */	addi r4, r3, gTRKEventQueue@l
/* 80014694 000114B4  80 04 00 24 */	lwz r0, 0x24(r4)
/* 80014698 000114B8  7C 64 EA 14 */	add r3, r4, r29
/* 8001469C 000114BC  90 03 00 10 */	stw r0, 0x10(r3)
/* 800146A0 000114C0  80 64 00 24 */	lwz r3, 0x24(r4)
/* 800146A4 000114C4  38 03 00 01 */	addi r0, r3, 0x1
/* 800146A8 000114C8  28 00 01 00 */	cmplwi r0, 0x100
/* 800146AC 000114CC  90 04 00 24 */	stw r0, 0x24(r4)
/* 800146B0 000114D0  40 80 00 0C */	bge lbl_800146BC
/* 800146B4 000114D4  38 00 01 00 */	li r0, 0x100
/* 800146B8 000114D8  90 04 00 24 */	stw r0, 0x24(r4)
lbl_800146BC:
/* 800146BC 000114DC  80 7E 00 04 */	lwz r3, 0x4(r30)
/* 800146C0 000114E0  38 03 00 01 */	addi r0, r3, 0x1
/* 800146C4 000114E4  90 1E 00 04 */	stw r0, 0x4(r30)
lbl_800146C8:
/* 800146C8 000114E8  3C 60 80 08 */	lis r3, gTRKEventQueue@ha
/* 800146CC 000114EC  38 63 6B 10 */	addi r3, r3, gTRKEventQueue@l
/* 800146D0 000114F0  48 00 44 CD */	bl TRKReleaseMutex
/* 800146D4 000114F4  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800146D8 000114F8  7F E3 FB 78 */	mr r3, r31
/* 800146DC 000114FC  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800146E0 00011500  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800146E4 00011504  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 800146E8 00011508  7C 08 03 A6 */	mtlr r0
/* 800146EC 0001150C  38 21 00 20 */	addi r1, r1, 0x20
/* 800146F0 00011510  4E 80 00 20 */	blr

.global TRKGetNextEvent
TRKGetNextEvent:
/* 800146F4 00011514  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800146F8 00011518  7C 08 02 A6 */	mflr r0
/* 800146FC 0001151C  3C 80 80 08 */	lis r4, gTRKEventQueue@ha
/* 80014700 00011520  90 01 00 24 */	stw r0, 0x24(r1)
/* 80014704 00011524  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80014708 00011528  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8001470C 0001152C  3B C0 00 00 */	li r30, 0x0
/* 80014710 00011530  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80014714 00011534  7C 7D 1B 78 */	mr r29, r3
/* 80014718 00011538  38 64 6B 10 */	addi r3, r4, gTRKEventQueue@l
/* 8001471C 0001153C  48 00 44 89 */	bl TRKAcquireMutex
/* 80014720 00011540  3C 60 80 08 */	lis r3, gTRKEventQueue@ha
/* 80014724 00011544  3B E3 6B 10 */	addi r31, r3, gTRKEventQueue@l
/* 80014728 00011548  80 1F 00 04 */	lwz r0, 0x4(r31)
/* 8001472C 0001154C  2C 00 00 00 */	cmpwi r0, 0x0
/* 80014730 00011550  40 81 00 4C */	ble lbl_8001477C
/* 80014734 00011554  80 1F 00 08 */	lwz r0, 0x8(r31)
/* 80014738 00011558  7F A3 EB 78 */	mr r3, r29
/* 8001473C 0001155C  38 A0 00 0C */	li r5, 0xc
/* 80014740 00011560  1C 00 00 0C */	mulli r0, r0, 0xc
/* 80014744 00011564  7C 9F 02 14 */	add r4, r31, r0
/* 80014748 00011568  38 84 00 0C */	addi r4, r4, 0xc
/* 8001474C 0001156C  4B FE EB 1D */	bl TRK_memcpy
/* 80014750 00011570  80 7F 00 08 */	lwz r3, 0x8(r31)
/* 80014754 00011574  80 9F 00 04 */	lwz r4, 0x4(r31)
/* 80014758 00011578  38 03 00 01 */	addi r0, r3, 0x1
/* 8001475C 0001157C  38 64 FF FF */	addi r3, r4, -0x1
/* 80014760 00011580  90 1F 00 08 */	stw r0, 0x8(r31)
/* 80014764 00011584  2C 00 00 02 */	cmpwi r0, 0x2
/* 80014768 00011588  90 7F 00 04 */	stw r3, 0x4(r31)
/* 8001476C 0001158C  40 82 00 0C */	bne lbl_80014778
/* 80014770 00011590  38 00 00 00 */	li r0, 0x0
/* 80014774 00011594  90 1F 00 08 */	stw r0, 0x8(r31)
lbl_80014778:
/* 80014778 00011598  3B C0 00 01 */	li r30, 0x1
lbl_8001477C:
/* 8001477C 0001159C  3C 60 80 08 */	lis r3, gTRKEventQueue@ha
/* 80014780 000115A0  38 63 6B 10 */	addi r3, r3, gTRKEventQueue@l
/* 80014784 000115A4  48 00 44 19 */	bl TRKReleaseMutex
/* 80014788 000115A8  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8001478C 000115AC  7F C3 F3 78 */	mr r3, r30
/* 80014790 000115B0  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80014794 000115B4  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80014798 000115B8  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8001479C 000115BC  7C 08 03 A6 */	mtlr r0
/* 800147A0 000115C0  38 21 00 20 */	addi r1, r1, 0x20
/* 800147A4 000115C4  4E 80 00 20 */	blr

.global TRKInitializeEventQueue
TRKInitializeEventQueue:
/* 800147A8 000115C8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 800147AC 000115CC  7C 08 02 A6 */	mflr r0
/* 800147B0 000115D0  3C 60 80 08 */	lis r3, gTRKEventQueue@ha
/* 800147B4 000115D4  90 01 00 14 */	stw r0, 0x14(r1)
/* 800147B8 000115D8  38 63 6B 10 */	addi r3, r3, gTRKEventQueue@l
/* 800147BC 000115DC  48 00 43 F1 */	bl TRKInitializeMutex
/* 800147C0 000115E0  3C 60 80 08 */	lis r3, gTRKEventQueue@ha
/* 800147C4 000115E4  38 63 6B 10 */	addi r3, r3, gTRKEventQueue@l
/* 800147C8 000115E8  48 00 43 DD */	bl TRKAcquireMutex
/* 800147CC 000115EC  3C 60 80 08 */	lis r3, gTRKEventQueue@ha
/* 800147D0 000115F0  38 80 00 00 */	li r4, 0x0
/* 800147D4 000115F4  38 63 6B 10 */	addi r3, r3, gTRKEventQueue@l
/* 800147D8 000115F8  38 00 01 00 */	li r0, 0x100
/* 800147DC 000115FC  90 83 00 04 */	stw r4, 0x4(r3)
/* 800147E0 00011600  90 83 00 08 */	stw r4, 0x8(r3)
/* 800147E4 00011604  90 03 00 24 */	stw r0, 0x24(r3)
/* 800147E8 00011608  48 00 43 B5 */	bl TRKReleaseMutex
/* 800147EC 0001160C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 800147F0 00011610  38 60 00 00 */	li r3, 0x0
/* 800147F4 00011614  7C 08 03 A6 */	mtlr r0
/* 800147F8 00011618  38 21 00 10 */	addi r1, r1, 0x10
/* 800147FC 0001161C  4E 80 00 20 */	blr


.section .bss, "", @nobits  # 0x80085B20 - 0x800C3E60 ; 0x0003E340

.balign 8

.global gTRKEventQueue
gTRKEventQueue:
	.skip 0x28
