.include "macros.s"

.section .text, "ax"  # 0x800058A0 - 0x800764A0 ; 0x00070C00


.global CARDGetSerialNo
CARDGetSerialNo:
/* 800299FC 0002681C  7C 08 02 A6 */	mflr r0
/* 80029A00 00026820  2C 03 00 00 */	cmpwi r3, 0x0
/* 80029A04 00026824  90 01 00 04 */	stw r0, 0x4(r1)
/* 80029A08 00026828  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80029A0C 0002682C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80029A10 00026830  3B E4 00 00 */	addi r31, r4, 0x0
/* 80029A14 00026834  41 80 00 0C */	blt lbl_80029A20
/* 80029A18 00026838  2C 03 00 02 */	cmpwi r3, 0x2
/* 80029A1C 0002683C  41 80 00 0C */	blt lbl_80029A28
lbl_80029A20:
/* 80029A20 00026840  38 60 FF 80 */	li r3, -0x80
/* 80029A24 00026844  48 00 00 88 */	b lbl_80029AAC
lbl_80029A28:
/* 80029A28 00026848  38 81 00 10 */	addi r4, r1, 0x10
/* 80029A2C 0002684C  4B FF A1 E5 */	bl __CARDGetControlBlock
/* 80029A30 00026850  2C 03 00 00 */	cmpwi r3, 0x0
/* 80029A34 00026854  40 80 00 08 */	bge lbl_80029A3C
/* 80029A38 00026858  48 00 00 74 */	b lbl_80029AAC
lbl_80029A3C:
/* 80029A3C 0002685C  80 61 00 10 */	lwz r3, 0x10(r1)
/* 80029A40 00026860  38 E0 00 00 */	li r7, 0x0
/* 80029A44 00026864  38 C0 00 00 */	li r6, 0x0
/* 80029A48 00026868  80 A3 00 80 */	lwz r5, 0x80(r3)
/* 80029A4C 0002686C  38 80 00 00 */	li r4, 0x0
/* 80029A50 00026870  80 65 00 04 */	lwz r3, 0x4(r5)
/* 80029A54 00026874  80 05 00 00 */	lwz r0, 0x0(r5)
/* 80029A58 00026878  7C E7 1A 78 */	xor r7, r7, r3
/* 80029A5C 0002687C  38 65 00 08 */	addi r3, r5, 0x8
/* 80029A60 00026880  7C C6 02 78 */	xor r6, r6, r0
/* 80029A64 00026884  80 05 00 08 */	lwz r0, 0x8(r5)
/* 80029A68 00026888  80 63 00 04 */	lwz r3, 0x4(r3)
/* 80029A6C 0002688C  7C C6 02 78 */	xor r6, r6, r0
/* 80029A70 00026890  7C E7 1A 78 */	xor r7, r7, r3
/* 80029A74 00026894  38 65 00 10 */	addi r3, r5, 0x10
/* 80029A78 00026898  80 05 00 10 */	lwz r0, 0x10(r5)
/* 80029A7C 0002689C  80 63 00 04 */	lwz r3, 0x4(r3)
/* 80029A80 000268A0  7C C6 02 78 */	xor r6, r6, r0
/* 80029A84 000268A4  7C E7 1A 78 */	xor r7, r7, r3
/* 80029A88 000268A8  38 65 00 18 */	addi r3, r5, 0x18
/* 80029A8C 000268AC  80 05 00 18 */	lwz r0, 0x18(r5)
/* 80029A90 000268B0  80 63 00 04 */	lwz r3, 0x4(r3)
/* 80029A94 000268B4  7C C6 02 78 */	xor r6, r6, r0
/* 80029A98 000268B8  7C E7 1A 78 */	xor r7, r7, r3
/* 80029A9C 000268BC  90 FF 00 04 */	stw r7, 0x4(r31)
/* 80029AA0 000268C0  90 DF 00 00 */	stw r6, 0x0(r31)
/* 80029AA4 000268C4  80 61 00 10 */	lwz r3, 0x10(r1)
/* 80029AA8 000268C8  4B FF A2 21 */	bl __CARDPutControlBlock
lbl_80029AAC:
/* 80029AAC 000268CC  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80029AB0 000268D0  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80029AB4 000268D4  38 21 00 20 */	addi r1, r1, 0x20
/* 80029AB8 000268D8  7C 08 03 A6 */	mtlr r0
/* 80029ABC 000268DC  4E 80 00 20 */	blr

.global CARDSetAttributesAsync
CARDSetAttributesAsync:
/* 80029AC0 000268E0  7C 08 02 A6 */	mflr r0
/* 80029AC4 000268E4  90 01 00 04 */	stw r0, 0x4(r1)
/* 80029AC8 000268E8  94 21 FF 98 */	stwu r1, -0x68(r1)
/* 80029ACC 000268EC  93 E1 00 64 */	stw r31, 0x64(r1)
/* 80029AD0 000268F0  3B E6 00 00 */	addi r31, r6, 0x0
/* 80029AD4 000268F4  93 C1 00 60 */	stw r30, 0x60(r1)
/* 80029AD8 000268F8  3B C5 00 00 */	addi r30, r5, 0x0
/* 80029ADC 000268FC  38 A1 00 18 */	addi r5, r1, 0x18
/* 80029AE0 00026900  93 A1 00 5C */	stw r29, 0x5c(r1)
/* 80029AE4 00026904  3B A4 00 00 */	addi r29, r4, 0x0
/* 80029AE8 00026908  93 81 00 58 */	stw r28, 0x58(r1)
/* 80029AEC 0002690C  3B 83 00 00 */	addi r28, r3, 0x0
/* 80029AF0 00026910  4B FF FB FD */	bl __CARDGetStatusEx
/* 80029AF4 00026914  2C 03 00 00 */	cmpwi r3, 0x0
/* 80029AF8 00026918  40 80 00 08 */	bge lbl_80029B00
/* 80029AFC 0002691C  48 00 00 1C */	b lbl_80029B18
lbl_80029B00:
/* 80029B00 00026920  9B C1 00 4C */	stb r30, 0x4c(r1)
/* 80029B04 00026924  38 7C 00 00 */	addi r3, r28, 0x0
/* 80029B08 00026928  38 9D 00 00 */	addi r4, r29, 0x0
/* 80029B0C 0002692C  38 DF 00 00 */	addi r6, r31, 0x0
/* 80029B10 00026930  38 A1 00 18 */	addi r5, r1, 0x18
/* 80029B14 00026934  4B FF FC 95 */	bl __CARDSetStatusExAsync
lbl_80029B18:
/* 80029B18 00026938  80 01 00 6C */	lwz r0, 0x6c(r1)
/* 80029B1C 0002693C  83 E1 00 64 */	lwz r31, 0x64(r1)
/* 80029B20 00026940  83 C1 00 60 */	lwz r30, 0x60(r1)
/* 80029B24 00026944  83 A1 00 5C */	lwz r29, 0x5c(r1)
/* 80029B28 00026948  83 81 00 58 */	lwz r28, 0x58(r1)
/* 80029B2C 0002694C  38 21 00 68 */	addi r1, r1, 0x68
/* 80029B30 00026950  7C 08 03 A6 */	mtlr r0
/* 80029B34 00026954  4E 80 00 20 */	blr


.section .sdata, "wa"  # 0x800C3E60 - 0x800C4080 ; 0x00000220

.balign 8

.global __CARDVendorID
__CARDVendorID:

	# ROM: 0x82BC0
	.2byte 0xFFFF
