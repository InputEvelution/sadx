.include "macros.s"

.section .text, "ax"  # 0x800058A0 - 0x800764A0 ; 0x00070C00


.global BlockReadCallback
BlockReadCallback:
/* 8002527C 0002209C  7C 08 02 A6 */	mflr r0
/* 80025280 000220A0  90 01 00 04 */	stw r0, 0x4(r1)
/* 80025284 000220A4  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80025288 000220A8  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8002528C 000220AC  3B E3 00 00 */	addi r31, r3, 0x0
/* 80025290 000220B0  3C 60 80 0A */	lis r3, __CARDBlock@ha
/* 80025294 000220B4  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80025298 000220B8  1C BF 01 10 */	mulli r5, r31, 0x110
/* 8002529C 000220BC  93 A1 00 14 */	stw r29, 0x14(r1)
/* 800252A0 000220C0  38 03 3D 40 */	addi r0, r3, __CARDBlock@l
/* 800252A4 000220C4  7C 9D 23 79 */	mr. r29, r4
/* 800252A8 000220C8  7F C0 2A 14 */	add r30, r0, r5
/* 800252AC 000220CC  41 80 00 50 */	blt lbl_800252FC
/* 800252B0 000220D0  80 7E 00 B8 */	lwz r3, 0xb8(r30)
/* 800252B4 000220D4  38 03 02 00 */	addi r0, r3, 0x200
/* 800252B8 000220D8  90 1E 00 B8 */	stw r0, 0xb8(r30)
/* 800252BC 000220DC  80 7E 00 B0 */	lwz r3, 0xb0(r30)
/* 800252C0 000220E0  38 03 02 00 */	addi r0, r3, 0x200
/* 800252C4 000220E4  90 1E 00 B0 */	stw r0, 0xb0(r30)
/* 800252C8 000220E8  80 7E 00 B4 */	lwz r3, 0xb4(r30)
/* 800252CC 000220EC  38 03 02 00 */	addi r0, r3, 0x200
/* 800252D0 000220F0  90 1E 00 B4 */	stw r0, 0xb4(r30)
/* 800252D4 000220F4  80 7E 00 AC */	lwz r3, 0xac(r30)
/* 800252D8 000220F8  34 03 FF FF */	addic. r0, r3, -0x1
/* 800252DC 000220FC  90 1E 00 AC */	stw r0, 0xac(r30)
/* 800252E0 00022100  40 81 00 1C */	ble lbl_800252FC
/* 800252E4 00022104  3C 60 80 02 */	lis r3, BlockReadCallback@ha
/* 800252E8 00022108  38 83 52 7C */	addi r4, r3, BlockReadCallback@l
/* 800252EC 0002210C  38 7F 00 00 */	addi r3, r31, 0x0
/* 800252F0 00022110  4B FF E5 05 */	bl __CARDReadSegment
/* 800252F4 00022114  7C 7D 1B 79 */	mr. r29, r3
/* 800252F8 00022118  40 80 00 44 */	bge lbl_8002533C
lbl_800252FC:
/* 800252FC 0002211C  80 1E 00 D0 */	lwz r0, 0xd0(r30)
/* 80025300 00022120  28 00 00 00 */	cmplwi r0, 0x0
/* 80025304 00022124  40 82 00 10 */	bne lbl_80025314
/* 80025308 00022128  38 7E 00 00 */	addi r3, r30, 0x0
/* 8002530C 0002212C  38 9D 00 00 */	addi r4, r29, 0x0
/* 80025310 00022130  4B FF E9 B9 */	bl __CARDPutControlBlock
lbl_80025314:
/* 80025314 00022134  80 1E 00 D4 */	lwz r0, 0xd4(r30)
/* 80025318 00022138  28 00 00 00 */	cmplwi r0, 0x0
/* 8002531C 0002213C  7C 0C 03 78 */	mr r12, r0
/* 80025320 00022140  41 82 00 1C */	beq lbl_8002533C
/* 80025324 00022144  38 00 00 00 */	li r0, 0x0
/* 80025328 00022148  7D 88 03 A6 */	mtlr r12
/* 8002532C 0002214C  90 1E 00 D4 */	stw r0, 0xd4(r30)
/* 80025330 00022150  38 7F 00 00 */	addi r3, r31, 0x0
/* 80025334 00022154  38 9D 00 00 */	addi r4, r29, 0x0
/* 80025338 00022158  4E 80 00 21 */	blrl
lbl_8002533C:
/* 8002533C 0002215C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80025340 00022160  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80025344 00022164  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80025348 00022168  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8002534C 0002216C  38 21 00 20 */	addi r1, r1, 0x20
/* 80025350 00022170  7C 08 03 A6 */	mtlr r0
/* 80025354 00022174  4E 80 00 20 */	blr

.global __CARDRead
__CARDRead:
/* 80025358 00022178  7C 08 02 A6 */	mflr r0
/* 8002535C 0002217C  1D 23 01 10 */	mulli r9, r3, 0x110
/* 80025360 00022180  90 01 00 04 */	stw r0, 0x4(r1)
/* 80025364 00022184  3D 00 80 0A */	lis r8, __CARDBlock@ha
/* 80025368 00022188  94 21 FF F8 */	stwu r1, -0x8(r1)
/* 8002536C 0002218C  38 08 3D 40 */	addi r0, r8, __CARDBlock@l
/* 80025370 00022190  7D 00 4A 14 */	add r8, r0, r9
/* 80025374 00022194  80 08 00 00 */	lwz r0, 0x0(r8)
/* 80025378 00022198  2C 00 00 00 */	cmpwi r0, 0x0
/* 8002537C 0002219C  40 82 00 0C */	bne lbl_80025388
/* 80025380 000221A0  38 60 FF FD */	li r3, -0x3
/* 80025384 000221A4  48 00 00 28 */	b lbl_800253AC
lbl_80025388:
/* 80025388 000221A8  90 E8 00 D4 */	stw r7, 0xd4(r8)
/* 8002538C 000221AC  54 A0 BA 7E */	srwi r0, r5, 9
/* 80025390 000221B0  3C A0 80 02 */	lis r5, BlockReadCallback@ha
/* 80025394 000221B4  90 08 00 AC */	stw r0, 0xac(r8)
/* 80025398 000221B8  38 05 52 7C */	addi r0, r5, BlockReadCallback@l
/* 8002539C 000221BC  90 88 00 B0 */	stw r4, 0xb0(r8)
/* 800253A0 000221C0  7C 04 03 78 */	mr r4, r0
/* 800253A4 000221C4  90 C8 00 B4 */	stw r6, 0xb4(r8)
/* 800253A8 000221C8  4B FF E4 4D */	bl __CARDReadSegment
lbl_800253AC:
/* 800253AC 000221CC  80 01 00 0C */	lwz r0, 0xc(r1)
/* 800253B0 000221D0  38 21 00 08 */	addi r1, r1, 0x8
/* 800253B4 000221D4  7C 08 03 A6 */	mtlr r0
/* 800253B8 000221D8  4E 80 00 20 */	blr

.global BlockWriteCallback
BlockWriteCallback:
/* 800253BC 000221DC  7C 08 02 A6 */	mflr r0
/* 800253C0 000221E0  90 01 00 04 */	stw r0, 0x4(r1)
/* 800253C4 000221E4  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800253C8 000221E8  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800253CC 000221EC  3B E3 00 00 */	addi r31, r3, 0x0
/* 800253D0 000221F0  3C 60 80 0A */	lis r3, __CARDBlock@ha
/* 800253D4 000221F4  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800253D8 000221F8  1C BF 01 10 */	mulli r5, r31, 0x110
/* 800253DC 000221FC  93 A1 00 14 */	stw r29, 0x14(r1)
/* 800253E0 00022200  38 03 3D 40 */	addi r0, r3, __CARDBlock@l
/* 800253E4 00022204  7C 9D 23 79 */	mr. r29, r4
/* 800253E8 00022208  7F C0 2A 14 */	add r30, r0, r5
/* 800253EC 0002220C  41 80 00 50 */	blt lbl_8002543C
/* 800253F0 00022210  80 7E 00 B8 */	lwz r3, 0xb8(r30)
/* 800253F4 00022214  38 03 00 80 */	addi r0, r3, 0x80
/* 800253F8 00022218  90 1E 00 B8 */	stw r0, 0xb8(r30)
/* 800253FC 0002221C  80 7E 00 B0 */	lwz r3, 0xb0(r30)
/* 80025400 00022220  38 03 00 80 */	addi r0, r3, 0x80
/* 80025404 00022224  90 1E 00 B0 */	stw r0, 0xb0(r30)
/* 80025408 00022228  80 7E 00 B4 */	lwz r3, 0xb4(r30)
/* 8002540C 0002222C  38 03 00 80 */	addi r0, r3, 0x80
/* 80025410 00022230  90 1E 00 B4 */	stw r0, 0xb4(r30)
/* 80025414 00022234  80 7E 00 AC */	lwz r3, 0xac(r30)
/* 80025418 00022238  34 03 FF FF */	addic. r0, r3, -0x1
/* 8002541C 0002223C  90 1E 00 AC */	stw r0, 0xac(r30)
/* 80025420 00022240  40 81 00 1C */	ble lbl_8002543C
/* 80025424 00022244  3C 60 80 02 */	lis r3, BlockWriteCallback@ha
/* 80025428 00022248  38 83 53 BC */	addi r4, r3, BlockWriteCallback@l
/* 8002542C 0002224C  38 7F 00 00 */	addi r3, r31, 0x0
/* 80025430 00022250  4B FF E4 F9 */	bl __CARDWritePage
/* 80025434 00022254  7C 7D 1B 79 */	mr. r29, r3
/* 80025438 00022258  40 80 00 44 */	bge lbl_8002547C
lbl_8002543C:
/* 8002543C 0002225C  80 1E 00 D0 */	lwz r0, 0xd0(r30)
/* 80025440 00022260  28 00 00 00 */	cmplwi r0, 0x0
/* 80025444 00022264  40 82 00 10 */	bne lbl_80025454
/* 80025448 00022268  38 7E 00 00 */	addi r3, r30, 0x0
/* 8002544C 0002226C  38 9D 00 00 */	addi r4, r29, 0x0
/* 80025450 00022270  4B FF E8 79 */	bl __CARDPutControlBlock
lbl_80025454:
/* 80025454 00022274  80 1E 00 D4 */	lwz r0, 0xd4(r30)
/* 80025458 00022278  28 00 00 00 */	cmplwi r0, 0x0
/* 8002545C 0002227C  7C 0C 03 78 */	mr r12, r0
/* 80025460 00022280  41 82 00 1C */	beq lbl_8002547C
/* 80025464 00022284  38 00 00 00 */	li r0, 0x0
/* 80025468 00022288  7D 88 03 A6 */	mtlr r12
/* 8002546C 0002228C  90 1E 00 D4 */	stw r0, 0xd4(r30)
/* 80025470 00022290  38 7F 00 00 */	addi r3, r31, 0x0
/* 80025474 00022294  38 9D 00 00 */	addi r4, r29, 0x0
/* 80025478 00022298  4E 80 00 21 */	blrl
lbl_8002547C:
/* 8002547C 0002229C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80025480 000222A0  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80025484 000222A4  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80025488 000222A8  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8002548C 000222AC  38 21 00 20 */	addi r1, r1, 0x20
/* 80025490 000222B0  7C 08 03 A6 */	mtlr r0
/* 80025494 000222B4  4E 80 00 20 */	blr

.global __CARDWrite
__CARDWrite:
/* 80025498 000222B8  7C 08 02 A6 */	mflr r0
/* 8002549C 000222BC  1D 23 01 10 */	mulli r9, r3, 0x110
/* 800254A0 000222C0  90 01 00 04 */	stw r0, 0x4(r1)
/* 800254A4 000222C4  3D 00 80 0A */	lis r8, __CARDBlock@ha
/* 800254A8 000222C8  94 21 FF F8 */	stwu r1, -0x8(r1)
/* 800254AC 000222CC  38 08 3D 40 */	addi r0, r8, __CARDBlock@l
/* 800254B0 000222D0  7D 00 4A 14 */	add r8, r0, r9
/* 800254B4 000222D4  80 08 00 00 */	lwz r0, 0x0(r8)
/* 800254B8 000222D8  2C 00 00 00 */	cmpwi r0, 0x0
/* 800254BC 000222DC  40 82 00 0C */	bne lbl_800254C8
/* 800254C0 000222E0  38 60 FF FD */	li r3, -0x3
/* 800254C4 000222E4  48 00 00 28 */	b lbl_800254EC
lbl_800254C8:
/* 800254C8 000222E8  90 E8 00 D4 */	stw r7, 0xd4(r8)
/* 800254CC 000222EC  54 A0 C9 FE */	srwi r0, r5, 7
/* 800254D0 000222F0  3C A0 80 02 */	lis r5, BlockWriteCallback@ha
/* 800254D4 000222F4  90 08 00 AC */	stw r0, 0xac(r8)
/* 800254D8 000222F8  38 05 53 BC */	addi r0, r5, BlockWriteCallback@l
/* 800254DC 000222FC  90 88 00 B0 */	stw r4, 0xb0(r8)
/* 800254E0 00022300  7C 04 03 78 */	mr r4, r0
/* 800254E4 00022304  90 C8 00 B4 */	stw r6, 0xb4(r8)
/* 800254E8 00022308  4B FF E4 41 */	bl __CARDWritePage
lbl_800254EC:
/* 800254EC 0002230C  80 01 00 0C */	lwz r0, 0xc(r1)
/* 800254F0 00022310  38 21 00 08 */	addi r1, r1, 0x8
/* 800254F4 00022314  7C 08 03 A6 */	mtlr r0
/* 800254F8 00022318  4E 80 00 20 */	blr
