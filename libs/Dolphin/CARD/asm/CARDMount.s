.include "macros.s"

.section .text, "ax"  # 0x800058A0 - 0x800764A0 ; 0x00070C00


.global IsCard
IsCard:
/* 80026AF4 00023914  54 60 00 1F */	rlwinm. r0, r3, 0, 0, 15
/* 80026AF8 00023918  41 82 00 24 */	beq lbl_80026B1C
/* 80026AFC 0002391C  3C 03 80 00 */	addis r0, r3, 0x8000
/* 80026B00 00023920  28 00 00 04 */	cmplwi r0, 0x4
/* 80026B04 00023924  40 82 00 10 */	bne lbl_80026B14
/* 80026B08 00023928  A0 0D 80 A0 */	lhz r0, __CARDVendorID@sda21(r13)
/* 80026B0C 0002392C  28 00 FF FF */	cmplwi r0, 0xffff
/* 80026B10 00023930  40 82 00 0C */	bne lbl_80026B1C
lbl_80026B14:
/* 80026B14 00023934  38 60 00 00 */	li r3, 0x0
/* 80026B18 00023938  4E 80 00 20 */	blr
lbl_80026B1C:
/* 80026B1C 0002393C  54 60 07 BF */	clrlwi. r0, r3, 30
/* 80026B20 00023940  41 82 00 0C */	beq lbl_80026B2C
/* 80026B24 00023944  38 60 00 00 */	li r3, 0x0
/* 80026B28 00023948  4E 80 00 20 */	blr
lbl_80026B2C:
/* 80026B2C 0002394C  54 65 06 3A */	rlwinm r5, r3, 0, 24, 29
/* 80026B30 00023950  2C 05 00 20 */	cmpwi r5, 0x20
/* 80026B34 00023954  41 82 00 48 */	beq lbl_80026B7C
/* 80026B38 00023958  40 80 00 28 */	bge lbl_80026B60
/* 80026B3C 0002395C  2C 05 00 08 */	cmpwi r5, 0x8
/* 80026B40 00023960  41 82 00 3C */	beq lbl_80026B7C
/* 80026B44 00023964  40 80 00 10 */	bge lbl_80026B54
/* 80026B48 00023968  2C 05 00 04 */	cmpwi r5, 0x4
/* 80026B4C 0002396C  41 82 00 30 */	beq lbl_80026B7C
/* 80026B50 00023970  48 00 00 24 */	b lbl_80026B74
lbl_80026B54:
/* 80026B54 00023974  2C 05 00 10 */	cmpwi r5, 0x10
/* 80026B58 00023978  41 82 00 24 */	beq lbl_80026B7C
/* 80026B5C 0002397C  48 00 00 18 */	b lbl_80026B74
lbl_80026B60:
/* 80026B60 00023980  2C 05 00 80 */	cmpwi r5, 0x80
/* 80026B64 00023984  41 82 00 18 */	beq lbl_80026B7C
/* 80026B68 00023988  40 80 00 0C */	bge lbl_80026B74
/* 80026B6C 0002398C  2C 05 00 40 */	cmpwi r5, 0x40
/* 80026B70 00023990  41 82 00 0C */	beq lbl_80026B7C
lbl_80026B74:
/* 80026B74 00023994  38 60 00 00 */	li r3, 0x0
/* 80026B78 00023998  4E 80 00 20 */	blr
lbl_80026B7C:
/* 80026B7C 0002399C  3C 80 80 08 */	lis r4, SectorSizeTable@ha
/* 80026B80 000239A0  54 63 BE FA */	rlwinm r3, r3, 23, 27, 29
/* 80026B84 000239A4  38 04 EF 60 */	addi r0, r4, SectorSizeTable@l
/* 80026B88 000239A8  7C 60 1A 14 */	add r3, r0, r3
/* 80026B8C 000239AC  80 63 00 00 */	lwz r3, 0x0(r3)
/* 80026B90 000239B0  2C 03 00 00 */	cmpwi r3, 0x0
/* 80026B94 000239B4  40 82 00 0C */	bne lbl_80026BA0
/* 80026B98 000239B8  38 60 00 00 */	li r3, 0x0
/* 80026B9C 000239BC  4E 80 00 20 */	blr
lbl_80026BA0:
/* 80026BA0 000239C0  54 A0 88 DC */	rlwinm r0, r5, 17, 3, 14
/* 80026BA4 000239C4  7C 00 1B 96 */	divwu r0, r0, r3
/* 80026BA8 000239C8  28 00 00 08 */	cmplwi r0, 0x8
/* 80026BAC 000239CC  40 80 00 0C */	bge lbl_80026BB8
/* 80026BB0 000239D0  38 60 00 00 */	li r3, 0x0
/* 80026BB4 000239D4  4E 80 00 20 */	blr
lbl_80026BB8:
/* 80026BB8 000239D8  38 60 00 01 */	li r3, 0x1
/* 80026BBC 000239DC  4E 80 00 20 */	blr

.global CARDProbeEx
CARDProbeEx:
/* 80026BC0 000239E0  7C 08 02 A6 */	mflr r0
/* 80026BC4 000239E4  90 01 00 04 */	stw r0, 0x4(r1)
/* 80026BC8 000239E8  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 80026BCC 000239EC  BF 61 00 1C */	stmw r27, 0x1c(r1)
/* 80026BD0 000239F0  7C 7B 1B 79 */	mr. r27, r3
/* 80026BD4 000239F4  3B 84 00 00 */	addi r28, r4, 0x0
/* 80026BD8 000239F8  3B E5 00 00 */	addi r31, r5, 0x0
/* 80026BDC 000239FC  41 80 00 0C */	blt lbl_80026BE8
/* 80026BE0 00023A00  2C 1B 00 02 */	cmpwi r27, 0x2
/* 80026BE4 00023A04  41 80 00 0C */	blt lbl_80026BF0
lbl_80026BE8:
/* 80026BE8 00023A08  38 60 FF 80 */	li r3, -0x80
/* 80026BEC 00023A0C  48 00 01 3C */	b lbl_80026D28
lbl_80026BF0:
/* 80026BF0 00023A10  3C 60 80 00 */	lis r3, 0x800030E3@ha
/* 80026BF4 00023A14  88 03 30 E3 */	lbz r0, 0x800030E3@l(r3)
/* 80026BF8 00023A18  54 00 06 31 */	rlwinm. r0, r0, 0, 24, 24
/* 80026BFC 00023A1C  41 82 00 0C */	beq lbl_80026C08
/* 80026C00 00023A20  38 60 FF FD */	li r3, -0x3
/* 80026C04 00023A24  48 00 01 24 */	b lbl_80026D28
lbl_80026C08:
/* 80026C08 00023A28  1C 9B 01 10 */	mulli r4, r27, 0x110
/* 80026C0C 00023A2C  3C 60 80 0A */	lis r3, __CARDBlock@ha
/* 80026C10 00023A30  38 03 3D 40 */	addi r0, r3, __CARDBlock@l
/* 80026C14 00023A34  7F C0 22 14 */	add r30, r0, r4
/* 80026C18 00023A38  48 01 80 AD */	bl OSDisableInterrupts
/* 80026C1C 00023A3C  3B A3 00 00 */	addi r29, r3, 0x0
/* 80026C20 00023A40  38 7B 00 00 */	addi r3, r27, 0x0
/* 80026C24 00023A44  48 00 8A 0D */	bl EXIProbeEx
/* 80026C28 00023A48  2C 03 FF FF */	cmpwi r3, -0x1
/* 80026C2C 00023A4C  40 82 00 0C */	bne lbl_80026C38
/* 80026C30 00023A50  3B C0 FF FD */	li r30, -0x3
/* 80026C34 00023A54  48 00 00 E8 */	b lbl_80026D1C
lbl_80026C38:
/* 80026C38 00023A58  2C 03 00 00 */	cmpwi r3, 0x0
/* 80026C3C 00023A5C  40 82 00 0C */	bne lbl_80026C48
/* 80026C40 00023A60  3B C0 FF FF */	li r30, -0x1
/* 80026C44 00023A64  48 00 00 D8 */	b lbl_80026D1C
lbl_80026C48:
/* 80026C48 00023A68  80 1E 00 00 */	lwz r0, 0x0(r30)
/* 80026C4C 00023A6C  2C 00 00 00 */	cmpwi r0, 0x0
/* 80026C50 00023A70  41 82 00 40 */	beq lbl_80026C90
/* 80026C54 00023A74  80 1E 00 24 */	lwz r0, 0x24(r30)
/* 80026C58 00023A78  2C 00 00 01 */	cmpwi r0, 0x1
/* 80026C5C 00023A7C  40 80 00 0C */	bge lbl_80026C68
/* 80026C60 00023A80  3B C0 FF FF */	li r30, -0x1
/* 80026C64 00023A84  48 00 00 B8 */	b lbl_80026D1C
lbl_80026C68:
/* 80026C68 00023A88  28 1C 00 00 */	cmplwi r28, 0x0
/* 80026C6C 00023A8C  41 82 00 0C */	beq lbl_80026C78
/* 80026C70 00023A90  A0 1E 00 08 */	lhz r0, 0x8(r30)
/* 80026C74 00023A94  90 1C 00 00 */	stw r0, 0x0(r28)
lbl_80026C78:
/* 80026C78 00023A98  28 1F 00 00 */	cmplwi r31, 0x0
/* 80026C7C 00023A9C  41 82 00 0C */	beq lbl_80026C88
/* 80026C80 00023AA0  80 1E 00 0C */	lwz r0, 0xc(r30)
/* 80026C84 00023AA4  90 1F 00 00 */	stw r0, 0x0(r31)
lbl_80026C88:
/* 80026C88 00023AA8  3B C0 00 00 */	li r30, 0x0
/* 80026C8C 00023AAC  48 00 00 90 */	b lbl_80026D1C
lbl_80026C90:
/* 80026C90 00023AB0  7F 63 DB 78 */	mr r3, r27
/* 80026C94 00023AB4  48 00 95 A9 */	bl EXIGetState
/* 80026C98 00023AB8  54 60 07 39 */	rlwinm. r0, r3, 0, 28, 28
/* 80026C9C 00023ABC  41 82 00 0C */	beq lbl_80026CA8
/* 80026CA0 00023AC0  3B C0 FF FE */	li r30, -0x2
/* 80026CA4 00023AC4  48 00 00 78 */	b lbl_80026D1C
lbl_80026CA8:
/* 80026CA8 00023AC8  38 7B 00 00 */	addi r3, r27, 0x0
/* 80026CAC 00023ACC  38 A1 00 14 */	addi r5, r1, 0x14
/* 80026CB0 00023AD0  38 80 00 00 */	li r4, 0x0
/* 80026CB4 00023AD4  48 00 95 C9 */	bl EXIGetID
/* 80026CB8 00023AD8  2C 03 00 00 */	cmpwi r3, 0x0
/* 80026CBC 00023ADC  40 82 00 0C */	bne lbl_80026CC8
/* 80026CC0 00023AE0  3B C0 FF FF */	li r30, -0x1
/* 80026CC4 00023AE4  48 00 00 58 */	b lbl_80026D1C
lbl_80026CC8:
/* 80026CC8 00023AE8  80 61 00 14 */	lwz r3, 0x14(r1)
/* 80026CCC 00023AEC  4B FF FE 29 */	bl IsCard
/* 80026CD0 00023AF0  2C 03 00 00 */	cmpwi r3, 0x0
/* 80026CD4 00023AF4  41 82 00 44 */	beq lbl_80026D18
/* 80026CD8 00023AF8  28 1C 00 00 */	cmplwi r28, 0x0
/* 80026CDC 00023AFC  41 82 00 10 */	beq lbl_80026CEC
/* 80026CE0 00023B00  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80026CE4 00023B04  54 00 06 3A */	rlwinm r0, r0, 0, 24, 29
/* 80026CE8 00023B08  90 1C 00 00 */	stw r0, 0x0(r28)
lbl_80026CEC:
/* 80026CEC 00023B0C  28 1F 00 00 */	cmplwi r31, 0x0
/* 80026CF0 00023B10  41 82 00 20 */	beq lbl_80026D10
/* 80026CF4 00023B14  80 81 00 14 */	lwz r4, 0x14(r1)
/* 80026CF8 00023B18  3C 60 80 08 */	lis r3, SectorSizeTable@ha
/* 80026CFC 00023B1C  38 03 EF 60 */	addi r0, r3, SectorSizeTable@l
/* 80026D00 00023B20  54 83 BE FA */	rlwinm r3, r4, 23, 27, 29
/* 80026D04 00023B24  7C 60 1A 14 */	add r3, r0, r3
/* 80026D08 00023B28  80 03 00 00 */	lwz r0, 0x0(r3)
/* 80026D0C 00023B2C  90 1F 00 00 */	stw r0, 0x0(r31)
lbl_80026D10:
/* 80026D10 00023B30  3B C0 00 00 */	li r30, 0x0
/* 80026D14 00023B34  48 00 00 08 */	b lbl_80026D1C
lbl_80026D18:
/* 80026D18 00023B38  3B C0 FF FE */	li r30, -0x2
lbl_80026D1C:
/* 80026D1C 00023B3C  7F A3 EB 78 */	mr r3, r29
/* 80026D20 00023B40  48 01 7F CD */	bl OSRestoreInterrupts
/* 80026D24 00023B44  7F C3 F3 78 */	mr r3, r30
lbl_80026D28:
/* 80026D28 00023B48  BB 61 00 1C */	lmw r27, 0x1c(r1)
/* 80026D2C 00023B4C  80 01 00 34 */	lwz r0, 0x34(r1)
/* 80026D30 00023B50  38 21 00 30 */	addi r1, r1, 0x30
/* 80026D34 00023B54  7C 08 03 A6 */	mtlr r0
/* 80026D38 00023B58  4E 80 00 20 */	blr

.global DoMount
DoMount:
/* 80026D3C 00023B5C  7C 08 02 A6 */	mflr r0
/* 80026D40 00023B60  90 01 00 04 */	stw r0, 0x4(r1)
/* 80026D44 00023B64  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 80026D48 00023B68  93 E1 00 2C */	stw r31, 0x2c(r1)
/* 80026D4C 00023B6C  93 C1 00 28 */	stw r30, 0x28(r1)
/* 80026D50 00023B70  93 A1 00 24 */	stw r29, 0x24(r1)
/* 80026D54 00023B74  3B A3 00 00 */	addi r29, r3, 0x0
/* 80026D58 00023B78  1C 9D 01 10 */	mulli r4, r29, 0x110
/* 80026D5C 00023B7C  93 81 00 20 */	stw r28, 0x20(r1)
/* 80026D60 00023B80  3C 60 80 0A */	lis r3, __CARDBlock@ha
/* 80026D64 00023B84  38 03 3D 40 */	addi r0, r3, __CARDBlock@l
/* 80026D68 00023B88  7C 60 22 14 */	add r3, r0, r4
/* 80026D6C 00023B8C  80 03 00 24 */	lwz r0, 0x24(r3)
/* 80026D70 00023B90  3B E3 00 00 */	addi r31, r3, 0x0
/* 80026D74 00023B94  2C 00 00 00 */	cmpwi r0, 0x0
/* 80026D78 00023B98  40 82 02 AC */	bne lbl_80027024
/* 80026D7C 00023B9C  38 7D 00 00 */	addi r3, r29, 0x0
/* 80026D80 00023BA0  38 A1 00 18 */	addi r5, r1, 0x18
/* 80026D84 00023BA4  38 80 00 00 */	li r4, 0x0
/* 80026D88 00023BA8  48 00 94 F5 */	bl EXIGetID
/* 80026D8C 00023BAC  2C 03 00 00 */	cmpwi r3, 0x0
/* 80026D90 00023BB0  40 82 00 0C */	bne lbl_80026D9C
/* 80026D94 00023BB4  3B C0 FF FD */	li r30, -0x3
/* 80026D98 00023BB8  48 00 00 20 */	b lbl_80026DB8
lbl_80026D9C:
/* 80026D9C 00023BBC  80 61 00 18 */	lwz r3, 0x18(r1)
/* 80026DA0 00023BC0  4B FF FD 55 */	bl IsCard
/* 80026DA4 00023BC4  2C 03 00 00 */	cmpwi r3, 0x0
/* 80026DA8 00023BC8  41 82 00 0C */	beq lbl_80026DB4
/* 80026DAC 00023BCC  3B C0 00 00 */	li r30, 0x0
/* 80026DB0 00023BD0  48 00 00 08 */	b lbl_80026DB8
lbl_80026DB4:
/* 80026DB4 00023BD4  3B C0 FF FE */	li r30, -0x2
lbl_80026DB8:
/* 80026DB8 00023BD8  2C 1E 00 00 */	cmpwi r30, 0x0
/* 80026DBC 00023BDC  41 80 03 44 */	blt lbl_80027100
/* 80026DC0 00023BE0  80 01 00 18 */	lwz r0, 0x18(r1)
/* 80026DC4 00023BE4  3C 80 80 08 */	lis r4, SectorSizeTable@ha
/* 80026DC8 00023BE8  38 84 EF 60 */	addi r4, r4, SectorSizeTable@l
/* 80026DCC 00023BEC  90 1F 01 08 */	stw r0, 0x108(r31)
/* 80026DD0 00023BF0  3C 60 80 08 */	lis r3, LatencyTable@ha
/* 80026DD4 00023BF4  38 03 EF 80 */	addi r0, r3, LatencyTable@l
/* 80026DD8 00023BF8  80 A1 00 18 */	lwz r5, 0x18(r1)
/* 80026DDC 00023BFC  38 7D 00 00 */	addi r3, r29, 0x0
/* 80026DE0 00023C00  54 A5 06 3A */	rlwinm r5, r5, 0, 24, 29
/* 80026DE4 00023C04  B0 BF 00 08 */	sth r5, 0x8(r31)
/* 80026DE8 00023C08  80 A1 00 18 */	lwz r5, 0x18(r1)
/* 80026DEC 00023C0C  54 A5 BE FA */	rlwinm r5, r5, 23, 27, 29
/* 80026DF0 00023C10  7C 84 2A 14 */	add r4, r4, r5
/* 80026DF4 00023C14  80 84 00 00 */	lwz r4, 0x0(r4)
/* 80026DF8 00023C18  90 9F 00 0C */	stw r4, 0xc(r31)
/* 80026DFC 00023C1C  A0 BF 00 08 */	lhz r5, 0x8(r31)
/* 80026E00 00023C20  80 9F 00 0C */	lwz r4, 0xc(r31)
/* 80026E04 00023C24  54 A5 A0 16 */	slwi r5, r5, 20
/* 80026E08 00023C28  7C A5 1E 70 */	srawi r5, r5, 3
/* 80026E0C 00023C2C  7C A5 01 94 */	addze r5, r5
/* 80026E10 00023C30  7C 85 23 D6 */	divw r4, r5, r4
/* 80026E14 00023C34  B0 9F 00 10 */	sth r4, 0x10(r31)
/* 80026E18 00023C38  80 81 00 18 */	lwz r4, 0x18(r1)
/* 80026E1C 00023C3C  54 84 D6 FA */	rlwinm r4, r4, 26, 27, 29
/* 80026E20 00023C40  7C 80 22 14 */	add r4, r0, r4
/* 80026E24 00023C44  80 04 00 00 */	lwz r0, 0x0(r4)
/* 80026E28 00023C48  90 1F 00 14 */	stw r0, 0x14(r31)
/* 80026E2C 00023C4C  4B FF C3 89 */	bl __CARDClearStatus
/* 80026E30 00023C50  7C 7E 1B 79 */	mr. r30, r3
/* 80026E34 00023C54  41 80 02 CC */	blt lbl_80027100
/* 80026E38 00023C58  38 7D 00 00 */	addi r3, r29, 0x0
/* 80026E3C 00023C5C  38 81 00 14 */	addi r4, r1, 0x14
/* 80026E40 00023C60  4B FF C2 85 */	bl __CARDReadStatus
/* 80026E44 00023C64  7C 7E 1B 79 */	mr. r30, r3
/* 80026E48 00023C68  41 80 02 B8 */	blt lbl_80027100
/* 80026E4C 00023C6C  7F A3 EB 78 */	mr r3, r29
/* 80026E50 00023C70  48 00 87 61 */	bl EXIProbe
/* 80026E54 00023C74  2C 03 00 00 */	cmpwi r3, 0x0
/* 80026E58 00023C78  40 82 00 0C */	bne lbl_80026E64
/* 80026E5C 00023C7C  3B C0 FF FD */	li r30, -0x3
/* 80026E60 00023C80  48 00 02 A0 */	b lbl_80027100
lbl_80026E64:
/* 80026E64 00023C84  88 01 00 14 */	lbz r0, 0x14(r1)
/* 80026E68 00023C88  54 00 06 73 */	rlwinm. r0, r0, 0, 25, 25
/* 80026E6C 00023C8C  40 82 01 14 */	bne lbl_80026F80
/* 80026E70 00023C90  38 7D 00 00 */	addi r3, r29, 0x0
/* 80026E74 00023C94  38 9F 00 18 */	addi r4, r31, 0x18
/* 80026E78 00023C98  4B FF D5 19 */	bl __CARDUnlock
/* 80026E7C 00023C9C  7C 7E 1B 79 */	mr. r30, r3
/* 80026E80 00023CA0  41 80 02 80 */	blt lbl_80027100
/* 80026E84 00023CA4  48 01 A2 0D */	bl __OSLockSramEx
/* 80026E88 00023CA8  1C 1D 00 0C */	mulli r0, r29, 0xc
/* 80026E8C 00023CAC  7C 83 02 14 */	add r4, r3, r0
/* 80026E90 00023CB0  88 1F 00 18 */	lbz r0, 0x18(r31)
/* 80026E94 00023CB4  38 BF 00 18 */	addi r5, r31, 0x18
/* 80026E98 00023CB8  98 04 00 00 */	stb r0, 0x0(r4)
/* 80026E9C 00023CBC  39 05 00 02 */	addi r8, r5, 0x2
/* 80026EA0 00023CC0  39 25 00 03 */	addi r9, r5, 0x3
/* 80026EA4 00023CC4  88 FF 00 18 */	lbz r7, 0x18(r31)
/* 80026EA8 00023CC8  39 45 00 04 */	addi r10, r5, 0x4
/* 80026EAC 00023CCC  88 1F 00 19 */	lbz r0, 0x19(r31)
/* 80026EB0 00023CD0  39 65 00 05 */	addi r11, r5, 0x5
/* 80026EB4 00023CD4  39 85 00 06 */	addi r12, r5, 0x6
/* 80026EB8 00023CD8  98 04 00 01 */	stb r0, 0x1(r4)
/* 80026EBC 00023CDC  3B 85 00 07 */	addi r28, r5, 0x7
/* 80026EC0 00023CE0  38 A0 00 08 */	li r5, 0x8
/* 80026EC4 00023CE4  88 1F 00 19 */	lbz r0, 0x19(r31)
/* 80026EC8 00023CE8  88 C8 00 00 */	lbz r6, 0x0(r8)
/* 80026ECC 00023CEC  7C 07 02 14 */	add r0, r7, r0
/* 80026ED0 00023CF0  98 C4 00 02 */	stb r6, 0x2(r4)
/* 80026ED4 00023CF4  88 E8 00 00 */	lbz r7, 0x0(r8)
/* 80026ED8 00023CF8  88 C9 00 00 */	lbz r6, 0x0(r9)
/* 80026EDC 00023CFC  7C 00 3A 14 */	add r0, r0, r7
/* 80026EE0 00023D00  98 C4 00 03 */	stb r6, 0x3(r4)
/* 80026EE4 00023D04  88 E9 00 00 */	lbz r7, 0x0(r9)
/* 80026EE8 00023D08  88 CA 00 00 */	lbz r6, 0x0(r10)
/* 80026EEC 00023D0C  7C 00 3A 14 */	add r0, r0, r7
/* 80026EF0 00023D10  98 C4 00 04 */	stb r6, 0x4(r4)
/* 80026EF4 00023D14  88 EA 00 00 */	lbz r7, 0x0(r10)
/* 80026EF8 00023D18  88 CB 00 00 */	lbz r6, 0x0(r11)
/* 80026EFC 00023D1C  7C 00 3A 14 */	add r0, r0, r7
/* 80026F00 00023D20  98 C4 00 05 */	stb r6, 0x5(r4)
/* 80026F04 00023D24  88 EB 00 00 */	lbz r7, 0x0(r11)
/* 80026F08 00023D28  88 CC 00 00 */	lbz r6, 0x0(r12)
/* 80026F0C 00023D2C  7C 00 3A 14 */	add r0, r0, r7
/* 80026F10 00023D30  98 C4 00 06 */	stb r6, 0x6(r4)
/* 80026F14 00023D34  88 EC 00 00 */	lbz r7, 0x0(r12)
/* 80026F18 00023D38  88 DC 00 00 */	lbz r6, 0x0(r28)
/* 80026F1C 00023D3C  7C 00 3A 14 */	add r0, r0, r7
/* 80026F20 00023D40  98 C4 00 07 */	stb r6, 0x7(r4)
/* 80026F24 00023D44  88 DC 00 00 */	lbz r6, 0x0(r28)
/* 80026F28 00023D48  7C 00 32 14 */	add r0, r0, r6
/* 80026F2C 00023D4C  48 00 01 F0 */	b lbl_8002711C
lbl_80026F30:
/* 80026F30 00023D50  20 85 00 0C */	subfic r4, r5, 0xc
/* 80026F34 00023D54  2C 05 00 0C */	cmpwi r5, 0xc
/* 80026F38 00023D58  7C 89 03 A6 */	mtctr r4
/* 80026F3C 00023D5C  40 80 00 28 */	bge lbl_80026F64
lbl_80026F40:
/* 80026F40 00023D60  38 E5 00 18 */	addi r7, r5, 0x18
/* 80026F44 00023D64  7C FF 3A 14 */	add r7, r31, r7
/* 80026F48 00023D68  88 87 00 00 */	lbz r4, 0x0(r7)
/* 80026F4C 00023D6C  38 A5 00 01 */	addi r5, r5, 0x1
/* 80026F50 00023D70  98 86 00 00 */	stb r4, 0x0(r6)
/* 80026F54 00023D74  38 C6 00 01 */	addi r6, r6, 0x1
/* 80026F58 00023D78  88 87 00 00 */	lbz r4, 0x0(r7)
/* 80026F5C 00023D7C  7C 00 22 14 */	add r0, r0, r4
/* 80026F60 00023D80  42 00 FF E0 */	bdnz lbl_80026F40
lbl_80026F64:
/* 80026F64 00023D84  7C 63 EA 14 */	add r3, r3, r29
/* 80026F68 00023D88  7C 00 00 F8 */	nor r0, r0, r0
/* 80026F6C 00023D8C  98 03 00 26 */	stb r0, 0x26(r3)
/* 80026F70 00023D90  38 60 00 01 */	li r3, 0x1
/* 80026F74 00023D94  48 01 A4 A5 */	bl __OSUnlockSramEx
/* 80026F78 00023D98  7F C3 F3 78 */	mr r3, r30
/* 80026F7C 00023D9C  48 00 01 B0 */	b lbl_8002712C
lbl_80026F80:
/* 80026F80 00023DA0  38 00 00 01 */	li r0, 0x1
/* 80026F84 00023DA4  90 1F 00 24 */	stw r0, 0x24(r31)
/* 80026F88 00023DA8  48 01 A1 09 */	bl __OSLockSramEx
/* 80026F8C 00023DAC  1C 1D 00 0C */	mulli r0, r29, 0xc
/* 80026F90 00023DB0  3B C3 00 00 */	addi r30, r3, 0x0
/* 80026F94 00023DB4  7C BE 02 14 */	add r5, r30, r0
/* 80026F98 00023DB8  88 85 00 00 */	lbz r4, 0x0(r5)
/* 80026F9C 00023DBC  38 C0 00 08 */	li r6, 0x8
/* 80026FA0 00023DC0  88 05 00 01 */	lbz r0, 0x1(r5)
/* 80026FA4 00023DC4  88 65 00 02 */	lbz r3, 0x2(r5)
/* 80026FA8 00023DC8  7F 84 02 14 */	add r28, r4, r0
/* 80026FAC 00023DCC  88 05 00 03 */	lbz r0, 0x3(r5)
/* 80026FB0 00023DD0  7F 9C 1A 14 */	add r28, r28, r3
/* 80026FB4 00023DD4  88 65 00 04 */	lbz r3, 0x4(r5)
/* 80026FB8 00023DD8  7F 9C 02 14 */	add r28, r28, r0
/* 80026FBC 00023DDC  88 05 00 05 */	lbz r0, 0x5(r5)
/* 80026FC0 00023DE0  7F 9C 1A 14 */	add r28, r28, r3
/* 80026FC4 00023DE4  88 65 00 06 */	lbz r3, 0x6(r5)
/* 80026FC8 00023DE8  7F 9C 02 14 */	add r28, r28, r0
/* 80026FCC 00023DEC  88 05 00 07 */	lbz r0, 0x7(r5)
/* 80026FD0 00023DF0  7F 9C 1A 14 */	add r28, r28, r3
/* 80026FD4 00023DF4  7F 9C 02 14 */	add r28, r28, r0
/* 80026FD8 00023DF8  48 00 01 4C */	b lbl_80027124
lbl_80026FDC:
/* 80026FDC 00023DFC  20 06 00 0C */	subfic r0, r6, 0xc
/* 80026FE0 00023E00  2C 06 00 0C */	cmpwi r6, 0xc
/* 80026FE4 00023E04  7C 09 03 A6 */	mtctr r0
/* 80026FE8 00023E08  40 80 00 14 */	bge lbl_80026FFC
lbl_80026FEC:
/* 80026FEC 00023E0C  88 03 00 00 */	lbz r0, 0x0(r3)
/* 80026FF0 00023E10  38 63 00 01 */	addi r3, r3, 0x1
/* 80026FF4 00023E14  7F 9C 02 14 */	add r28, r28, r0
/* 80026FF8 00023E18  42 00 FF F4 */	bdnz lbl_80026FEC
lbl_80026FFC:
/* 80026FFC 00023E1C  38 60 00 00 */	li r3, 0x0
/* 80027000 00023E20  48 01 A4 19 */	bl __OSUnlockSramEx
/* 80027004 00023E24  7C 7E EA 14 */	add r3, r30, r29
/* 80027008 00023E28  7F 80 E0 F8 */	nor r0, r28, r28
/* 8002700C 00023E2C  88 63 00 26 */	lbz r3, 0x26(r3)
/* 80027010 00023E30  54 00 06 3E */	clrlwi r0, r0, 24
/* 80027014 00023E34  7C 03 00 40 */	cmplw r3, r0
/* 80027018 00023E38  41 82 00 0C */	beq lbl_80027024
/* 8002701C 00023E3C  3B C0 FF FB */	li r30, -0x5
/* 80027020 00023E40  48 00 00 E0 */	b lbl_80027100
lbl_80027024:
/* 80027024 00023E44  80 1F 00 24 */	lwz r0, 0x24(r31)
/* 80027028 00023E48  2C 00 00 01 */	cmpwi r0, 0x1
/* 8002702C 00023E4C  40 82 00 88 */	bne lbl_800270B4
/* 80027030 00023E50  80 7F 01 08 */	lwz r3, 0x108(r31)
/* 80027034 00023E54  3C 03 80 00 */	addis r0, r3, 0x8000
/* 80027038 00023E58  28 00 00 04 */	cmplwi r0, 0x4
/* 8002703C 00023E5C  40 82 00 34 */	bne lbl_80027070
/* 80027040 00023E60  48 01 A0 51 */	bl __OSLockSramEx
/* 80027044 00023E64  1C 1D 00 0C */	mulli r0, r29, 0xc
/* 80027048 00023E68  7F 83 02 2E */	lhzx r28, r3, r0
/* 8002704C 00023E6C  38 60 00 00 */	li r3, 0x0
/* 80027050 00023E70  48 01 A3 C9 */	bl __OSUnlockSramEx
/* 80027054 00023E74  A0 0D 80 A0 */	lhz r0, __CARDVendorID@sda21(r13)
/* 80027058 00023E78  28 00 FF FF */	cmplwi r0, 0xffff
/* 8002705C 00023E7C  41 82 00 0C */	beq lbl_80027068
/* 80027060 00023E80  7C 1C 00 40 */	cmplw r28, r0
/* 80027064 00023E84  41 82 00 0C */	beq lbl_80027070
lbl_80027068:
/* 80027068 00023E88  3B C0 FF FE */	li r30, -0x2
/* 8002706C 00023E8C  48 00 00 94 */	b lbl_80027100
lbl_80027070:
/* 80027070 00023E90  38 00 00 02 */	li r0, 0x2
/* 80027074 00023E94  90 1F 00 24 */	stw r0, 0x24(r31)
/* 80027078 00023E98  38 7D 00 00 */	addi r3, r29, 0x0
/* 8002707C 00023E9C  38 80 00 01 */	li r4, 0x1
/* 80027080 00023EA0  4B FF BF 85 */	bl __CARDEnableInterrupt
/* 80027084 00023EA4  7C 7E 1B 79 */	mr. r30, r3
/* 80027088 00023EA8  41 80 00 78 */	blt lbl_80027100
/* 8002708C 00023EAC  3C 60 80 02 */	lis r3, __CARDExiHandler@ha
/* 80027090 00023EB0  38 83 2D C0 */	addi r4, r3, __CARDExiHandler@l
/* 80027094 00023EB4  38 7D 00 00 */	addi r3, r29, 0x0
/* 80027098 00023EB8  48 00 83 29 */	bl EXISetExiCallback
/* 8002709C 00023EBC  7F A3 EB 78 */	mr r3, r29
/* 800270A0 00023EC0  48 00 90 C1 */	bl EXIUnlock
/* 800270A4 00023EC4  3C 80 00 01 */	lis r4, 0x1
/* 800270A8 00023EC8  80 7F 00 80 */	lwz r3, 0x80(r31)
/* 800270AC 00023ECC  38 84 A0 00 */	addi r4, r4, -0x6000
/* 800270B0 00023ED0  48 01 5A 45 */	bl DCInvalidateRange
lbl_800270B4:
/* 800270B4 00023ED4  80 9F 00 24 */	lwz r4, 0x24(r31)
/* 800270B8 00023ED8  3C 60 80 02 */	lis r3, __CARDMountCallback@ha
/* 800270BC 00023EDC  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 800270C0 00023EE0  38 E3 71 4C */	addi r7, r3, __CARDMountCallback@l
/* 800270C4 00023EE4  38 64 FF FE */	addi r3, r4, -0x2
/* 800270C8 00023EE8  7C 80 19 D6 */	mullw r4, r0, r3
/* 800270CC 00023EEC  80 BF 00 80 */	lwz r5, 0x80(r31)
/* 800270D0 00023EF0  54 60 68 24 */	slwi r0, r3, 13
/* 800270D4 00023EF4  7C C5 02 14 */	add r6, r5, r0
/* 800270D8 00023EF8  38 7D 00 00 */	addi r3, r29, 0x0
/* 800270DC 00023EFC  38 A0 20 00 */	li r5, 0x2000
/* 800270E0 00023F00  4B FF E2 79 */	bl __CARDRead
/* 800270E4 00023F04  7C 7C 1B 79 */	mr. r28, r3
/* 800270E8 00023F08  40 80 00 10 */	bge lbl_800270F8
/* 800270EC 00023F0C  38 7F 00 00 */	addi r3, r31, 0x0
/* 800270F0 00023F10  38 9C 00 00 */	addi r4, r28, 0x0
/* 800270F4 00023F14  4B FF CB D5 */	bl __CARDPutControlBlock
lbl_800270F8:
/* 800270F8 00023F18  7F 83 E3 78 */	mr r3, r28
/* 800270FC 00023F1C  48 00 00 30 */	b lbl_8002712C
lbl_80027100:
/* 80027100 00023F20  7F A3 EB 78 */	mr r3, r29
/* 80027104 00023F24  48 00 90 5D */	bl EXIUnlock
/* 80027108 00023F28  38 7D 00 00 */	addi r3, r29, 0x0
/* 8002710C 00023F2C  38 9E 00 00 */	addi r4, r30, 0x0
/* 80027110 00023F30  48 00 03 5D */	bl DoUnmount
/* 80027114 00023F34  7F C3 F3 78 */	mr r3, r30
/* 80027118 00023F38  48 00 00 14 */	b lbl_8002712C
lbl_8002711C:
/* 8002711C 00023F3C  38 C4 00 08 */	addi r6, r4, 0x8
/* 80027120 00023F40  4B FF FE 10 */	b lbl_80026F30
lbl_80027124:
/* 80027124 00023F44  38 65 00 08 */	addi r3, r5, 0x8
/* 80027128 00023F48  4B FF FE B4 */	b lbl_80026FDC
lbl_8002712C:
/* 8002712C 00023F4C  80 01 00 34 */	lwz r0, 0x34(r1)
/* 80027130 00023F50  83 E1 00 2C */	lwz r31, 0x2c(r1)
/* 80027134 00023F54  83 C1 00 28 */	lwz r30, 0x28(r1)
/* 80027138 00023F58  83 A1 00 24 */	lwz r29, 0x24(r1)
/* 8002713C 00023F5C  83 81 00 20 */	lwz r28, 0x20(r1)
/* 80027140 00023F60  38 21 00 30 */	addi r1, r1, 0x30
/* 80027144 00023F64  7C 08 03 A6 */	mtlr r0
/* 80027148 00023F68  4E 80 00 20 */	blr

.global __CARDMountCallback
__CARDMountCallback:
/* 8002714C 00023F6C  7C 08 02 A6 */	mflr r0
/* 80027150 00023F70  90 01 00 04 */	stw r0, 0x4(r1)
/* 80027154 00023F74  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80027158 00023F78  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8002715C 00023F7C  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80027160 00023F80  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80027164 00023F84  3B A4 00 00 */	addi r29, r4, 0x0
/* 80027168 00023F88  2C 1D FF FD */	cmpwi r29, -0x3
/* 8002716C 00023F8C  93 81 00 10 */	stw r28, 0x10(r1)
/* 80027170 00023F90  3B 83 00 00 */	addi r28, r3, 0x0
/* 80027174 00023F94  1C BC 01 10 */	mulli r5, r28, 0x110
/* 80027178 00023F98  3C 60 80 0A */	lis r3, __CARDBlock@ha
/* 8002717C 00023F9C  38 03 3D 40 */	addi r0, r3, __CARDBlock@l
/* 80027180 00023FA0  7F E0 2A 14 */	add r31, r0, r5
/* 80027184 00023FA4  41 82 00 A8 */	beq lbl_8002722C
/* 80027188 00023FA8  40 80 00 10 */	bge lbl_80027198
/* 8002718C 00023FAC  2C 1D FF FB */	cmpwi r29, -0x5
/* 80027190 00023FB0  41 82 00 9C */	beq lbl_8002722C
/* 80027194 00023FB4  48 00 00 A4 */	b lbl_80027238
lbl_80027198:
/* 80027198 00023FB8  2C 1D 00 01 */	cmpwi r29, 0x1
/* 8002719C 00023FBC  41 82 00 4C */	beq lbl_800271E8
/* 800271A0 00023FC0  40 80 00 98 */	bge lbl_80027238
/* 800271A4 00023FC4  2C 1D 00 00 */	cmpwi r29, 0x0
/* 800271A8 00023FC8  40 80 00 08 */	bge lbl_800271B0
/* 800271AC 00023FCC  48 00 00 8C */	b lbl_80027238
lbl_800271B0:
/* 800271B0 00023FD0  80 7F 00 24 */	lwz r3, 0x24(r31)
/* 800271B4 00023FD4  38 03 00 01 */	addi r0, r3, 0x1
/* 800271B8 00023FD8  2C 00 00 07 */	cmpwi r0, 0x7
/* 800271BC 00023FDC  90 1F 00 24 */	stw r0, 0x24(r31)
/* 800271C0 00023FE0  40 80 00 18 */	bge lbl_800271D8
/* 800271C4 00023FE4  7F 83 E3 78 */	mr r3, r28
/* 800271C8 00023FE8  4B FF FB 75 */	bl DoMount
/* 800271CC 00023FEC  7C 7D 1B 79 */	mr. r29, r3
/* 800271D0 00023FF0  41 80 00 68 */	blt lbl_80027238
/* 800271D4 00023FF4  48 00 00 90 */	b lbl_80027264
lbl_800271D8:
/* 800271D8 00023FF8  7F E3 FB 78 */	mr r3, r31
/* 800271DC 00023FFC  4B FF F2 81 */	bl __CARDVerify
/* 800271E0 00024000  7C 7D 1B 78 */	mr r29, r3
/* 800271E4 00024004  48 00 00 54 */	b lbl_80027238
lbl_800271E8:
/* 800271E8 00024008  3C 60 80 02 */	lis r3, __CARDMountCallback@ha
/* 800271EC 0002400C  38 03 71 4C */	addi r0, r3, __CARDMountCallback@l
/* 800271F0 00024010  3C 60 80 02 */	lis r3, __CARDUnlockedHandler@ha
/* 800271F4 00024014  90 1F 00 DC */	stw r0, 0xdc(r31)
/* 800271F8 00024018  38 A3 2F 80 */	addi r5, r3, __CARDUnlockedHandler@l
/* 800271FC 0002401C  38 7C 00 00 */	addi r3, r28, 0x0
/* 80027200 00024020  38 80 00 00 */	li r4, 0x0
/* 80027204 00024024  48 00 8E 69 */	bl EXILock
/* 80027208 00024028  2C 03 00 00 */	cmpwi r3, 0x0
/* 8002720C 0002402C  41 82 00 58 */	beq lbl_80027264
/* 80027210 00024030  38 00 00 00 */	li r0, 0x0
/* 80027214 00024034  90 1F 00 DC */	stw r0, 0xdc(r31)
/* 80027218 00024038  7F 83 E3 78 */	mr r3, r28
/* 8002721C 0002403C  4B FF FB 21 */	bl DoMount
/* 80027220 00024040  7C 7D 1B 79 */	mr. r29, r3
/* 80027224 00024044  41 80 00 14 */	blt lbl_80027238
/* 80027228 00024048  48 00 00 3C */	b lbl_80027264
lbl_8002722C:
/* 8002722C 0002404C  38 7C 00 00 */	addi r3, r28, 0x0
/* 80027230 00024050  38 9D 00 00 */	addi r4, r29, 0x0
/* 80027234 00024054  48 00 02 39 */	bl DoUnmount
lbl_80027238:
/* 80027238 00024058  83 DF 00 D0 */	lwz r30, 0xd0(r31)
/* 8002723C 0002405C  38 00 00 00 */	li r0, 0x0
/* 80027240 00024060  38 7F 00 00 */	addi r3, r31, 0x0
/* 80027244 00024064  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 80027248 00024068  7F A4 EB 78 */	mr r4, r29
/* 8002724C 0002406C  4B FF CA 7D */	bl __CARDPutControlBlock
/* 80027250 00024070  39 9E 00 00 */	addi r12, r30, 0x0
/* 80027254 00024074  7D 88 03 A6 */	mtlr r12
/* 80027258 00024078  38 7C 00 00 */	addi r3, r28, 0x0
/* 8002725C 0002407C  38 9D 00 00 */	addi r4, r29, 0x0
/* 80027260 00024080  4E 80 00 21 */	blrl
lbl_80027264:
/* 80027264 00024084  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80027268 00024088  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8002726C 0002408C  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80027270 00024090  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80027274 00024094  83 81 00 10 */	lwz r28, 0x10(r1)
/* 80027278 00024098  38 21 00 20 */	addi r1, r1, 0x20
/* 8002727C 0002409C  7C 08 03 A6 */	mtlr r0
/* 80027280 000240A0  4E 80 00 20 */	blr

.global CARDMountAsync
CARDMountAsync:
/* 80027284 000240A4  7C 08 02 A6 */	mflr r0
/* 80027288 000240A8  90 01 00 04 */	stw r0, 0x4(r1)
/* 8002728C 000240AC  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 80027290 000240B0  BF 41 00 18 */	stmw r26, 0x18(r1)
/* 80027294 000240B4  7C 7E 1B 79 */	mr. r30, r3
/* 80027298 000240B8  3B 44 00 00 */	addi r26, r4, 0x0
/* 8002729C 000240BC  3B 65 00 00 */	addi r27, r5, 0x0
/* 800272A0 000240C0  3B A6 00 00 */	addi r29, r6, 0x0
/* 800272A4 000240C4  41 80 00 0C */	blt lbl_800272B0
/* 800272A8 000240C8  2C 1E 00 02 */	cmpwi r30, 0x2
/* 800272AC 000240CC  41 80 00 0C */	blt lbl_800272B8
lbl_800272B0:
/* 800272B0 000240D0  38 60 FF 80 */	li r3, -0x80
/* 800272B4 000240D4  48 00 01 5C */	b lbl_80027410
lbl_800272B8:
/* 800272B8 000240D8  3C 60 80 00 */	lis r3, 0x800030E3@ha
/* 800272BC 000240DC  88 03 30 E3 */	lbz r0, 0x800030E3@l(r3)
/* 800272C0 000240E0  54 00 06 31 */	rlwinm. r0, r0, 0, 24, 24
/* 800272C4 000240E4  41 82 00 0C */	beq lbl_800272D0
/* 800272C8 000240E8  38 60 FF FD */	li r3, -0x3
/* 800272CC 000240EC  48 00 01 44 */	b lbl_80027410
lbl_800272D0:
/* 800272D0 000240F0  1C 9E 01 10 */	mulli r4, r30, 0x110
/* 800272D4 000240F4  3C 60 80 0A */	lis r3, __CARDBlock@ha
/* 800272D8 000240F8  38 03 3D 40 */	addi r0, r3, __CARDBlock@l
/* 800272DC 000240FC  7F E0 22 14 */	add r31, r0, r4
/* 800272E0 00024100  48 01 79 E5 */	bl OSDisableInterrupts
/* 800272E4 00024104  80 1F 00 04 */	lwz r0, 0x4(r31)
/* 800272E8 00024108  3B 83 00 00 */	addi r28, r3, 0x0
/* 800272EC 0002410C  2C 00 FF FF */	cmpwi r0, -0x1
/* 800272F0 00024110  40 82 00 14 */	bne lbl_80027304
/* 800272F4 00024114  7F 83 E3 78 */	mr r3, r28
/* 800272F8 00024118  48 01 79 F5 */	bl OSRestoreInterrupts
/* 800272FC 0002411C  38 60 FF FF */	li r3, -0x1
/* 80027300 00024120  48 00 01 10 */	b lbl_80027410
lbl_80027304:
/* 80027304 00024124  80 1F 00 00 */	lwz r0, 0x0(r31)
/* 80027308 00024128  2C 00 00 00 */	cmpwi r0, 0x0
/* 8002730C 0002412C  40 82 00 24 */	bne lbl_80027330
/* 80027310 00024130  7F C3 F3 78 */	mr r3, r30
/* 80027314 00024134  48 00 8F 29 */	bl EXIGetState
/* 80027318 00024138  54 60 07 39 */	rlwinm. r0, r3, 0, 28, 28
/* 8002731C 0002413C  41 82 00 14 */	beq lbl_80027330
/* 80027320 00024140  7F 83 E3 78 */	mr r3, r28
/* 80027324 00024144  48 01 79 C9 */	bl OSRestoreInterrupts
/* 80027328 00024148  38 60 FF FE */	li r3, -0x2
/* 8002732C 0002414C  48 00 00 E4 */	b lbl_80027410
lbl_80027330:
/* 80027330 00024150  38 00 FF FF */	li r0, -0x1
/* 80027334 00024154  90 1F 00 04 */	stw r0, 0x4(r31)
/* 80027338 00024158  28 1D 00 00 */	cmplwi r29, 0x0
/* 8002733C 0002415C  93 5F 00 80 */	stw r26, 0x80(r31)
/* 80027340 00024160  93 7F 00 C4 */	stw r27, 0xc4(r31)
/* 80027344 00024164  41 82 00 0C */	beq lbl_80027350
/* 80027348 00024168  7F A0 EB 78 */	mr r0, r29
/* 8002734C 0002416C  48 00 00 0C */	b lbl_80027358
lbl_80027350:
/* 80027350 00024170  3C 60 80 02 */	lis r3, __CARDDefaultApiCallback@ha
/* 80027354 00024174  38 03 2C B0 */	addi r0, r3, __CARDDefaultApiCallback@l
lbl_80027358:
/* 80027358 00024178  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 8002735C 0002417C  38 00 00 00 */	li r0, 0x0
/* 80027360 00024180  90 1F 00 CC */	stw r0, 0xcc(r31)
/* 80027364 00024184  80 1F 00 00 */	lwz r0, 0x0(r31)
/* 80027368 00024188  2C 00 00 00 */	cmpwi r0, 0x0
/* 8002736C 0002418C  40 82 00 34 */	bne lbl_800273A0
/* 80027370 00024190  3C 60 80 02 */	lis r3, __CARDExtHandler@ha
/* 80027374 00024194  38 83 2C E8 */	addi r4, r3, __CARDExtHandler@l
/* 80027378 00024198  38 7E 00 00 */	addi r3, r30, 0x0
/* 8002737C 0002419C  48 00 83 69 */	bl EXIAttach
/* 80027380 000241A0  2C 03 00 00 */	cmpwi r3, 0x0
/* 80027384 000241A4  40 82 00 1C */	bne lbl_800273A0
/* 80027388 000241A8  38 00 FF FD */	li r0, -0x3
/* 8002738C 000241AC  90 1F 00 04 */	stw r0, 0x4(r31)
/* 80027390 000241B0  7F 83 E3 78 */	mr r3, r28
/* 80027394 000241B4  48 01 79 59 */	bl OSRestoreInterrupts
/* 80027398 000241B8  38 60 FF FD */	li r3, -0x3
/* 8002739C 000241BC  48 00 00 74 */	b lbl_80027410
lbl_800273A0:
/* 800273A0 000241C0  3B A0 00 00 */	li r29, 0x0
/* 800273A4 000241C4  93 BF 00 24 */	stw r29, 0x24(r31)
/* 800273A8 000241C8  38 00 00 01 */	li r0, 0x1
/* 800273AC 000241CC  38 7E 00 00 */	addi r3, r30, 0x0
/* 800273B0 000241D0  90 1F 00 00 */	stw r0, 0x0(r31)
/* 800273B4 000241D4  38 80 00 00 */	li r4, 0x0
/* 800273B8 000241D8  48 00 80 09 */	bl EXISetExiCallback
/* 800273BC 000241DC  38 7F 00 E0 */	addi r3, r31, 0xe0
/* 800273C0 000241E0  48 01 4A 15 */	bl OSCancelAlarm
/* 800273C4 000241E4  93 BF 00 84 */	stw r29, 0x84(r31)
/* 800273C8 000241E8  7F 83 E3 78 */	mr r3, r28
/* 800273CC 000241EC  93 BF 00 88 */	stw r29, 0x88(r31)
/* 800273D0 000241F0  48 01 79 1D */	bl OSRestoreInterrupts
/* 800273D4 000241F4  3C 60 80 02 */	lis r3, __CARDMountCallback@ha
/* 800273D8 000241F8  38 03 71 4C */	addi r0, r3, __CARDMountCallback@l
/* 800273DC 000241FC  3C 60 80 02 */	lis r3, __CARDUnlockedHandler@ha
/* 800273E0 00024200  90 1F 00 DC */	stw r0, 0xdc(r31)
/* 800273E4 00024204  38 A3 2F 80 */	addi r5, r3, __CARDUnlockedHandler@l
/* 800273E8 00024208  38 7E 00 00 */	addi r3, r30, 0x0
/* 800273EC 0002420C  38 80 00 00 */	li r4, 0x0
/* 800273F0 00024210  48 00 8C 7D */	bl EXILock
/* 800273F4 00024214  2C 03 00 00 */	cmpwi r3, 0x0
/* 800273F8 00024218  40 82 00 0C */	bne lbl_80027404
/* 800273FC 0002421C  38 60 00 00 */	li r3, 0x0
/* 80027400 00024220  48 00 00 10 */	b lbl_80027410
lbl_80027404:
/* 80027404 00024224  93 BF 00 DC */	stw r29, 0xdc(r31)
/* 80027408 00024228  7F C3 F3 78 */	mr r3, r30
/* 8002740C 0002422C  4B FF F9 31 */	bl DoMount
lbl_80027410:
/* 80027410 00024230  BB 41 00 18 */	lmw r26, 0x18(r1)
/* 80027414 00024234  80 01 00 34 */	lwz r0, 0x34(r1)
/* 80027418 00024238  38 21 00 30 */	addi r1, r1, 0x30
/* 8002741C 0002423C  7C 08 03 A6 */	mtlr r0
/* 80027420 00024240  4E 80 00 20 */	blr

.global CARDMount
CARDMount:
/* 80027424 00024244  7C 08 02 A6 */	mflr r0
/* 80027428 00024248  3C C0 80 02 */	lis r6, __CARDSyncCallback@ha
/* 8002742C 0002424C  90 01 00 04 */	stw r0, 0x4(r1)
/* 80027430 00024250  38 C6 2C B4 */	addi r6, r6, __CARDSyncCallback@l
/* 80027434 00024254  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80027438 00024258  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8002743C 0002425C  3B E3 00 00 */	addi r31, r3, 0x0
/* 80027440 00024260  4B FF FE 45 */	bl CARDMountAsync
/* 80027444 00024264  2C 03 00 00 */	cmpwi r3, 0x0
/* 80027448 00024268  40 80 00 08 */	bge lbl_80027450
/* 8002744C 0002426C  48 00 00 0C */	b lbl_80027458
lbl_80027450:
/* 80027450 00024270  7F E3 FB 78 */	mr r3, r31
/* 80027454 00024274  4B FF CA E1 */	bl __CARDSync
lbl_80027458:
/* 80027458 00024278  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8002745C 0002427C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80027460 00024280  38 21 00 20 */	addi r1, r1, 0x20
/* 80027464 00024284  7C 08 03 A6 */	mtlr r0
/* 80027468 00024288  4E 80 00 20 */	blr

.global DoUnmount
DoUnmount:
/* 8002746C 0002428C  7C 08 02 A6 */	mflr r0
/* 80027470 00024290  90 01 00 04 */	stw r0, 0x4(r1)
/* 80027474 00024294  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80027478 00024298  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8002747C 0002429C  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80027480 000242A0  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80027484 000242A4  3B A4 00 00 */	addi r29, r4, 0x0
/* 80027488 000242A8  93 81 00 10 */	stw r28, 0x10(r1)
/* 8002748C 000242AC  3B 83 00 00 */	addi r28, r3, 0x0
/* 80027490 000242B0  1C BC 01 10 */	mulli r5, r28, 0x110
/* 80027494 000242B4  3C 60 80 0A */	lis r3, __CARDBlock@ha
/* 80027498 000242B8  38 03 3D 40 */	addi r0, r3, __CARDBlock@l
/* 8002749C 000242BC  7F E0 2A 14 */	add r31, r0, r5
/* 800274A0 000242C0  48 01 78 25 */	bl OSDisableInterrupts
/* 800274A4 000242C4  80 1F 00 00 */	lwz r0, 0x0(r31)
/* 800274A8 000242C8  3B C3 00 00 */	addi r30, r3, 0x0
/* 800274AC 000242CC  2C 00 00 00 */	cmpwi r0, 0x0
/* 800274B0 000242D0  41 82 00 30 */	beq lbl_800274E0
/* 800274B4 000242D4  38 7C 00 00 */	addi r3, r28, 0x0
/* 800274B8 000242D8  38 80 00 00 */	li r4, 0x0
/* 800274BC 000242DC  48 00 7F 05 */	bl EXISetExiCallback
/* 800274C0 000242E0  7F 83 E3 78 */	mr r3, r28
/* 800274C4 000242E4  48 00 83 2D */	bl EXIDetach
/* 800274C8 000242E8  38 7F 00 E0 */	addi r3, r31, 0xe0
/* 800274CC 000242EC  48 01 49 09 */	bl OSCancelAlarm
/* 800274D0 000242F0  38 00 00 00 */	li r0, 0x0
/* 800274D4 000242F4  90 1F 00 00 */	stw r0, 0x0(r31)
/* 800274D8 000242F8  93 BF 00 04 */	stw r29, 0x4(r31)
/* 800274DC 000242FC  90 1F 00 24 */	stw r0, 0x24(r31)
lbl_800274E0:
/* 800274E0 00024300  7F C3 F3 78 */	mr r3, r30
/* 800274E4 00024304  48 01 78 09 */	bl OSRestoreInterrupts
/* 800274E8 00024308  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800274EC 0002430C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800274F0 00024310  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800274F4 00024314  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 800274F8 00024318  83 81 00 10 */	lwz r28, 0x10(r1)
/* 800274FC 0002431C  38 21 00 20 */	addi r1, r1, 0x20
/* 80027500 00024320  7C 08 03 A6 */	mtlr r0
/* 80027504 00024324  4E 80 00 20 */	blr

.global CARDUnmount
CARDUnmount:
/* 80027508 00024328  7C 08 02 A6 */	mflr r0
/* 8002750C 0002432C  90 01 00 04 */	stw r0, 0x4(r1)
/* 80027510 00024330  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80027514 00024334  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80027518 00024338  38 81 00 0C */	addi r4, r1, 0xc
/* 8002751C 0002433C  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80027520 00024340  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80027524 00024344  3B A3 00 00 */	addi r29, r3, 0x0
/* 80027528 00024348  4B FF C6 E9 */	bl __CARDGetControlBlock
/* 8002752C 0002434C  2C 03 00 00 */	cmpwi r3, 0x0
/* 80027530 00024350  40 80 00 08 */	bge lbl_80027538
/* 80027534 00024354  48 00 00 64 */	b lbl_80027598
lbl_80027538:
/* 80027538 00024358  1C 9D 01 10 */	mulli r4, r29, 0x110
/* 8002753C 0002435C  3C 60 80 0A */	lis r3, __CARDBlock@ha
/* 80027540 00024360  38 03 3D 40 */	addi r0, r3, __CARDBlock@l
/* 80027544 00024364  7F C0 22 14 */	add r30, r0, r4
/* 80027548 00024368  48 01 77 7D */	bl OSDisableInterrupts
/* 8002754C 0002436C  80 1E 00 00 */	lwz r0, 0x0(r30)
/* 80027550 00024370  3B E3 00 00 */	addi r31, r3, 0x0
/* 80027554 00024374  2C 00 00 00 */	cmpwi r0, 0x0
/* 80027558 00024378  41 82 00 34 */	beq lbl_8002758C
/* 8002755C 0002437C  38 7D 00 00 */	addi r3, r29, 0x0
/* 80027560 00024380  38 80 00 00 */	li r4, 0x0
/* 80027564 00024384  48 00 7E 5D */	bl EXISetExiCallback
/* 80027568 00024388  7F A3 EB 78 */	mr r3, r29
/* 8002756C 0002438C  48 00 82 85 */	bl EXIDetach
/* 80027570 00024390  38 7E 00 E0 */	addi r3, r30, 0xe0
/* 80027574 00024394  48 01 48 61 */	bl OSCancelAlarm
/* 80027578 00024398  38 60 00 00 */	li r3, 0x0
/* 8002757C 0002439C  90 7E 00 00 */	stw r3, 0x0(r30)
/* 80027580 000243A0  38 00 FF FD */	li r0, -0x3
/* 80027584 000243A4  90 1E 00 04 */	stw r0, 0x4(r30)
/* 80027588 000243A8  90 7E 00 24 */	stw r3, 0x24(r30)
lbl_8002758C:
/* 8002758C 000243AC  7F E3 FB 78 */	mr r3, r31
/* 80027590 000243B0  48 01 77 5D */	bl OSRestoreInterrupts
/* 80027594 000243B4  38 60 00 00 */	li r3, 0x0
lbl_80027598:
/* 80027598 000243B8  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8002759C 000243BC  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800275A0 000243C0  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800275A4 000243C4  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 800275A8 000243C8  38 21 00 20 */	addi r1, r1, 0x20
/* 800275AC 000243CC  7C 08 03 A6 */	mtlr r0
/* 800275B0 000243D0  4E 80 00 20 */	blr


.section .data, "wa"  # 0x80079C60 - 0x80085B20 ; 0x0000BEC0

.balign 8

.global SectorSizeTable
SectorSizeTable:

	# ROM: 0x7BF60
	.4byte 0x00002000
	.4byte 0x00004000
	.4byte 0x00008000
	.4byte 0x00010000
	.4byte 0x00020000
	.4byte 0x00040000
	.4byte 0x00000000
	.4byte 0x00000000

.global LatencyTable
LatencyTable:

	# ROM: 0x7BF80
	.4byte 0x00000004
	.4byte 0x00000008
	.4byte 0x00000010
	.4byte 0x00000020
	.4byte 0x00000040
	.4byte 0x00000080
	.4byte 0x00000100
	.4byte 0x00000200
